{"version":3,"file":"jet.es6.js","sources":["../../sources/JetBase.ts","../../sources/helpers.ts","../../sources/JetView.ts","../../sources/JetViewLegacy.ts","../../sources/JetViewRaw.ts","../../node_modules/webix-routie/lib/routie.js","../../sources/routers/HashRouter.ts","../../sources/patch.ts","../../sources/JetApp.ts","../../sources/routers/StoreRouter.ts","../../sources/routers/UrlRouter.ts","../../sources/routers/EmptyRouter.ts","../../sources/plugins/Guard.ts","../../node_modules/webix-polyglot/index.js","../../sources/plugins/Locale.ts","../../sources/plugins/Menu.ts","../../sources/plugins/Status.ts","../../sources/plugins/Theme.ts","../../sources/plugins/UrlParam.ts","../../sources/plugins/User.ts","../../sources/index.ts"],"sourcesContent":["import { IJetApp, IJetURL, IJetView,\n\tISubView, ISubViewInfo } from \"./interfaces\";\n\n\nexport abstract class JetBase implements IJetView{\n\tpublic app: IJetApp;\n\tpublic webixJet = true;\n\t//temporary workaround for app.refresh, next var must be private\n\tpublic _name: string;\n\tprotected _parent: IJetView;\n\tprotected _index: number;\n\tprotected _container: HTMLElement | webix.ui.baseview;\n\tprotected _root: webix.ui.baseview;\n\tprotected _id: number;\n\tprotected _events:{ id:string, obj: any }[];\n\tprotected _subs:{[name:string]:ISubView};\n\tprivate _data:{[name:string]:any};\n\tprivate _url:IJetURL;\n\n\n\tconstructor(){\n\t\tthis._id = webix.uid() as number;\n\n\t\tthis._events = [];\n\t\tthis._subs = {};\n\t\tthis._data = {};\n\t}\n\n\tgetRoot(): webix.ui.baseview {\n\t\treturn this._root;\n\t}\n\n\tdestructor() {\n\t\tconst events = this._events;\n\t\tfor (let i = events.length - 1; i >= 0; i--){\n\t\t\tevents[i].obj.detachEvent(events[i].id);\n\t\t}\n\n\t\t// destroy sub views\n\t\tfor (const key in this._subs){\n\t\t\tconst subView = this._subs[key].view;\n\t\t\t// it possible that subview was not loaded with any content yet\n\t\t\t// so check on null\n\t\t\tif (subView){\n\t\t\t\tsubView.destructor();\n\t\t\t}\n\t\t}\n\n\t\tthis._events = this._container = this.app = this._parent = null;\n\t}\n\tsetParam(id:string, value:any, url?:boolean){\n\t\tif (this._data[id] !== value){\n\t\t\tthis._data[id] = value;\n\t\t\tif (this.app.callEvent(\"app:paramchange\", [this, id, value, url])){\n\t\t\t\tif (url){\n\t\t\t\t\t// changing in the url\n\t\t\t\t\tthis.show({[id]:value});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tgetParam(id:string, parent:boolean):any{\n\t\tconst value = this._data[id];\n\t\tif (typeof value !== \"undefined\" || !parent){\n\t\t\treturn value;\n\t\t}\n\n\t\tconst view = this.getParentView();\n\t\tif (view){\n\t\t\treturn view.getParam(id, parent);\n\t\t}\n\t}\n\tgetUrl():IJetURL{\n\t\treturn this._url;\n\t}\n\trender(\n\t\troot?: string | HTMLElement | webix.ui.baseview,\n\t\turl?: IJetURL, parent?: IJetView): Promise<webix.ui.baseview> {\n\n\t\tthis._parent = parent;\n\t\tif (url) {\n\t\t\tthis._index = url[0].index;\n\t\t}\n\t\tthis._init_url_data(url);\n\n\t\troot = root || document.body;\n\t\tconst _container = (typeof root === \"string\") ? webix.toNode(root) : root;\n\n\t\tif (this._container !== _container) {\n\t\t\tthis._container = _container;\n\t\t\treturn this._render(url).then(() => this.getRoot());\n\t\t} else {\n\n\t\t\treturn this._urlChange(url).then(() => this.getRoot());\n\t\t}\n\t}\n\n\tgetIndex():number{\n\t\treturn this._index;\n\t}\n\tgetId():number{\n\t\treturn this._id;\n\t}\n\tgetParentView() : IJetView{\n\t\treturn this._parent;\n\t}\n\n\t$$(id:string | webix.ui.baseview):webix.ui.baseview{\n\t\tif (typeof id === \"string\"){\n\t\t\tconst root = this.getRoot() as any;\n\t\t\treturn root.queryView(\n\t\t\t\t(obj => (obj.config.id === id || obj.config.localId === id) &&\n\t\t\t\t\t\t(obj.$scope === root.$scope)\n\t\t\t\t),\n\t\t\t\t\"self\");\n\t\t} else {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\ton(obj, name, code){\n\t\tconst id = obj.attachEvent(name, code);\n\t\tthis._events.push({ obj, id });\n\t\treturn id;\n\t}\n\n\tcontains(view: IJetView){\n\t\tfor (const key in this._subs){\n\t\t\tconst kid = this._subs[key].view;\n\t\t\tif (kid === view || kid.contains(view)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetSubView(name?:string):IJetView{\n\t\tconst sub = this.getSubViewInfo(name);\n\t\tif (sub){\n\t\t\treturn sub.subview.view;\n\t\t}\n\t}\n\n\tgetSubViewInfo(name?:string):ISubViewInfo{\n\t\tconst sub = this._subs[name || \"default\"];\n\t\tif (sub){\n\t\t\treturn { subview:sub, parent:this };\n\t\t}\n\n\t\t// when called from a child view, searches for nearest parent with subview\n\t\tif (this._parent){\n\t\t\treturn this._parent.getSubViewInfo(name);\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetName():string{\n\t\treturn this._name;\n\t}\n\n\tpublic abstract refresh();\n\tpublic abstract show(path:any, config?:any);\n\tprotected abstract _render(url: IJetURL) : Promise<any>;\n\tprotected abstract _urlChange(url: IJetURL) : Promise<any>;\n\tprotected _init_url_data(url:IJetURL){\n\t\tif (url && url[0]){\n\t\t\tthis._data = {};\n\t\t\twebix.extend(this._data, url[0].params, true);\n\t\t}\n\t\tthis._url = url;\n\t}\n}\n","import {IJetURLChunk} from \"./interfaces\";\n\nexport function diff(oUrl, nUrl){\n\tlet i = 0;\n\tfor (i; i<nUrl.length; i++){\n\t\tconst left = oUrl[i];\n\t\tconst right = nUrl[i];\n\n\t\tif (!left){\n\t\t\tbreak;\n\t\t}\n\t\tif (left.page !== right.page){\n\t\t\tbreak;\n\t\t}\n\n\t\tfor (const key in left.params){\n\t\t\tif (left.params[key] !== right.params[key]){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn i;\n}\n\nexport function parse(url:string):IJetURLChunk[]{\n\t// remove starting /\n\tif (url[0] === \"/\"){\n\t\turl = url.substr(1);\n\t}\n\n\t// split url by \"/\"\n\tconst parts = url.split(\"/\");\n\tconst chunks:IJetURLChunk[] = [];\n\n\t// for each page in url\n\tfor (let i = 0; i < parts.length; i++){\n\t\tconst test = parts[i];\n\t\tconst result = {};\n\n\t\t// detect params\n\t\t// support old \t\t\tsome:a=b:c=d\n\t\t// and new notation\t\tsome?a=b&c=d\n\t\tlet pos = test.indexOf(\":\");\n\t\tif (pos === -1){\n\t\t\tpos = test.indexOf(\"?\");\n\t\t}\n\n\t\tif (pos !== -1){\n\t\t\tconst params = test.substr(pos+1).split(/[\\:\\?\\&]/g);\n\t\t\t// create hash of named params\n\t\t\tfor (const param of params) {\n\t\t\t\tconst dchunk = param.split(\"=\");\n\t\t\t\tresult[dchunk[0]] = decodeURIComponent(dchunk[1]);\n\t\t\t}\n\t\t}\n\n\t\t// store parsed values\n\t\tchunks[i] = {\n\t\t\tpage: (pos > -1 ? test.substr(0, pos) : test),\n\t\t\tparams:result, index:i+1\n\t\t};\n\t}\n\n\t// return array of page objects\n\treturn chunks;\n}\n\nexport function url2str(stack:IJetURLChunk[]):string{\n\tconst url = [];\n\n\tfor (const chunk of stack){\n\t\turl.push(\"/\"+chunk.page);\n\t\tconst params = obj2str(chunk.params);\n\t\tif (params){\n\t\t\turl.push(\"?\"+params);\n\t\t}\n\t}\n\n\treturn url.join(\"\");\n}\n\nfunction obj2str(obj){\n\tconst str = [];\n\tfor (const key in obj){\n\t\tif (str.length){\n\t\t\tstr.push(\"&\");\n\t\t}\n\t\tstr.push(key+\"=\"+encodeURIComponent(obj[key]));\n\t}\n\n\treturn str.join(\"\");\n}","import {JetBase} from \"./JetBase\";\n\nimport {parse, url2str} from \"./helpers\";\nimport {\n\tIJetApp, IJetURL,\n\tIJetView, IJetViewFactory, ISubView, IUIConfig} from \"./interfaces\";\n\ninterface IDestructable{\n\tdestructor():void;\n}\n\nexport class JetView extends JetBase{\n\tprivate _children:IDestructable[];\n\tprivate _parentFrame:ISubView;\n\n\tconstructor(app : IJetApp, name : string){\n\t\tsuper();\n\n\t\tthis.app = app;\n\n\t\tthis._name = name;\n\t\tthis._children = [];\n\t}\n\n\tui(\n\t\tui:webix.ui.viewConfig|IJetViewFactory,\n\t\tconfig?: IUIConfig\n\t) : webix.ui.baseview | IJetView{\n\t\tconfig = config || {};\n\t\tconst container = config.container || (ui as webix.ui.viewConfig).container;\n\n\t\tconst jetview = this.app.createView(ui);\n\t\tthis._children.push(jetview);\n\n\t\tjetview.render(container, null, this);\n\n\t\tif (typeof ui !== \"object\" || (ui instanceof JetBase)){\n\t\t\t// raw webix UI\n\t\t\treturn jetview;\n\t\t} else {\n\t\t\treturn jetview.getRoot();\n\t\t}\n\t}\n\n\tshow(path:any, config?:any):Promise<any>{\n\t\tconfig = config || {};\n\n\t\t// detect the related view\n\t\tif (typeof path === \"string\"){\n\t\t\t// root path\n\t\t\tif (path.substr(0,1) === \"/\"){\n\t\t\t\treturn this.app.show(path);\n\t\t\t}\n\t\t\t// parent path, call parent view\n\t\t\tif (path.indexOf(\"../\") === 0){\n\t\t\t\tconst parent = this.getParentView();\n\t\t\t\tif (parent){\n\t\t\t\t\tparent.show(\"./\"+path.substr(3), config);\n\t\t\t\t} else {\n\t\t\t\t\tthis.app.show(\"/\"+path.substr(3));\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// local path, do nothing\n\t\t\tif (path.indexOf(\"./\") === 0){\n\t\t\t\tpath = path.substr(2);\n\t\t\t}\n\n\t\t\tconst sub = this.getSubViewInfo(config.target);\n\t\t\tif (!sub){\n\t\t\t\treturn this.app.show(\"/\"+path);\n\t\t\t}\n\t\t\tif (sub.parent !== this){\n\t\t\t\treturn sub.parent.show(path, config);\n\t\t\t}\n\t\t}\n\n\t\tconst currentUrl = parse(this.app.getRouter().get());\n\n\t\t// convert parameters to url\n\t\tif (typeof path === \"object\"){\n\t\t\tif (webix.isArray(path)){\n\t\t\t\tconst argIndex = this._index+path[0];\n\t\t\t\tif (!currentUrl[argIndex]){\n\t\t\t\t\tcurrentUrl[argIndex] = {} as any;\n\t\t\t\t}\n\t\t\t\tcurrentUrl[argIndex].page=path[1];\n\t\t\t\tpath = \"\";\n\t\t\t} else {\n\t\t\t\tconst temp = [];\n\t\t\t\tfor (const key in path){\n\t\t\t\t\ttemp.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(path[key]));\n\t\t\t\t}\n\t\t\t\tpath = \"?\"+temp.join(\"&\");\n\t\t\t}\n\t\t}\n\n\t\t// process url\n\t\tif (typeof path === \"string\"){\n\t\t\t// parameters only\n\t\t\tif (path.substr(0, 1) === \"?\") {\n\t\t\t\tconst next = path.indexOf(\"/\");\n\t\t\t\tlet params = path;\n\t\t\t\tif (next > -1){\n\t\t\t\t\tparams = path.substr(0, next);\n\t\t\t\t}\n\t\t\t\tconst chunk = parse(params);\n\t\t\t\twebix.extend(currentUrl[this._index-1].params, chunk[0].params, true);\n\t\t\t\tpath = next > -1 ? path.substr(next+1) : \"\";\n\t\t\t}\n\n\t\t\tconst newChunk = path === \"\" ? currentUrl.slice(this._index) : parse(path);\n\t\t\tlet url: IJetURL = null;\n\t\t\tif (this._index){\n\t\t\t\turl = currentUrl.slice(0, this._index).concat(newChunk);\n\t\t\t\tfor\t(let i=0; i<url.length; i++){\n\t\t\t\t\turl[i].index = i+1;\n\t\t\t\t}\n\n\t\t\t\tconst urlstr = url2str(url);\n\n\t\t\t\treturn this.app.canNavigate(urlstr, this).then(redirect => {\n\t\t\t\t\tif (redirect !== null){\n\t\t\t\t\t\tif (urlstr !== redirect){\n\t\t\t\t\t\t\t// url was blocked and redirected\n\t\t\t\t\t\t\treturn this.app.show(redirect);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn this._finishShow(url, redirect);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this._finishShow(newChunk, \"\");\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(_$view:webix.ui.baseview, _$url: IJetURL){\n\t\t// stub\n\t}\n\tready(_$view:webix.ui.baseview, _$url: IJetURL){\n\t\t// stub\n\t}\n\tconfig() : any {\n\t\tthis.app.webix.message(\"View:Config is not implemented\");\n\t}\n\turlChange(_$view: webix.ui.baseview, _$url : IJetURL){\n\t\t// stub\n\t}\n\n\tdestroy(){\n\t\t// stub\n\t}\n\n\tdestructor(){\n\t\tthis.destroy();\n\t\tthis._destroyKids();\n\n\t\t// reset vars for better GC processing\n\t\tthis.app = this._parentFrame = null;\n\n\t\t// destroy actual UI\n\t\tthis._root.destructor();\n\t\tsuper.destructor();\n\t}\n\n\tuse(plugin, config){\n\t\tplugin(this.app, this, config);\n\t}\n\n\trefresh(){\n\t\tthis._destroyKids();\n\t\tlet url = [];\n\t\tif (this._index > 1)\n\t\t\turl = parse(this.app.getRouter().get()).slice(this._index-1);\n\t\tthis._render(url).then(() => {\n\t\t\tthis._parentFrame.id = this.getRoot().config.id as string;\n\t\t});\n\t}\n\n\tprotected _render(url:IJetURL):Promise<any>{\n\t\tconst config = this.config();\n\t\tif (config.then){\n\t\t\treturn config.then(cfg => this._render_final(cfg, url));\n\t\t} else {\n\t\t\treturn this._render_final(config, url);\n\t\t}\n\t}\n\n\tprotected _render_final(config:any, url:IJetURL):Promise<any>{\n\t\tconst prev = this._container as webix.ui.baseview;\n\t\tif (prev && (prev as any).$destructed){\n\t\t\treturn Promise.reject(\"Container destroyed\");\n\t\t}\n\n\t\tlet response:Promise<any>;\n\n\t\t// using wrapper object, so ui can be changed from app:render event\n\t\tconst result:any = { ui: {} };\n\t\tthis.app.copyConfig(config, result.ui, this._subs);\n\t\tthis.app.callEvent(\"app:render\", [this, url, result]);\n\t\tresult.ui.$scope = this;\n\n\t\ttry {\n\t\t\t// special handling for adding inside of multiview - preserve old id\n\t\t\tif (prev && prev.getParentView){\n\t\t\t\tconst parent = prev.getParentView();\n\t\t\t\tif (parent && parent.name === \"multiview\" && !result.ui.id){\n\t\t\t\t\tresult.ui.id = prev.config.id;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._root = this.app.webix.ui(result.ui, this._container);\n\t\t\tif (this._root.getParentView()){\n\t\t\t\tthis._container = this._root;\n\t\t\t}\n\n\t\t\tthis._init(this._root, url);\n\t\t\tresponse = this._urlChange(url).then(() => {\n\t\t\t\treturn this.ready(this._root, url);\n\t\t\t});\n\t\t} catch(e){\n\t\t\tresponse = Promise.reject(e);\n\t\t}\n\n\t\treturn response.catch(err => this._initError(this, err));\n\t}\n\n\tprotected _init(view:webix.ui.baseview, url: IJetURL){\n\t\treturn this.init(view, url);\n\t}\n\n\tprotected _urlChange(url:IJetURL):Promise<any>{\n\t\tthis.app.callEvent(\"app:urlchange\", [this, url, this._index]);\n\n\t\tconst waits = [];\n\t\tfor (const key in this._subs){\n\t\t\tconst wait = this._renderFrame(key, this._subs[key], url);\n\t\t\tif (wait){\n\t\t\t\twaits.push(wait);\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(waits).then(() => {\n\t\t\tthis.urlChange(this._root, url);\n\t\t});\n\t}\n\n\tprotected _renderFrame(key:string, frame:ISubView, url:IJetURL):Promise<any>{\n\t\tif (frame.url){\n\t\t\t// we have fixed subview url\n\t\t\tif (typeof frame.url === \"string\"){\n\t\t\t\tconst parsed = parse(frame.url);\n\t\t\t\tparsed.map(a => { a.index = 0; });\n\t\t\t\treturn this._createSubView(frame, parsed);\n\t\t\t} else {\n\t\t\t\tlet view = frame.view;\n\t\t\t\tif (typeof frame.url === \"function\" && !(view instanceof frame.url)){\n\t\t\t\t\tview = new frame.url(this.app, \"\");\n\t\t\t\t}\n\t\t\t\tif (!view){\n\t\t\t\t\tview = frame.url as any;\n\t\t\t\t}\n\t\t\t\treturn this._renderSubView(frame, view, url);\n\t\t\t}\n\t\t} else if (key === \"default\" && url && url.length > 1){\n\t\t\t// we have an url and subview for it\n\t\t\tconst suburl = url.slice(1);\n\t\t\treturn this._createSubView(frame, suburl);\n\t\t}\n\t}\n\n\tprivate _initError(view: any, err: any){\n\t\tthis.app.error(\"app:error:initview\", [err, view]);\n\t\treturn true;\n\t}\n\n\tprivate _createSubView(\n\t\t\t\t\tsub:ISubView,\n\t\t\t\t\tsuburl:IJetURL):Promise<webix.ui.baseview>{\n\t\treturn this.app.createFromURL(suburl, sub.view).then(view => {\n\t\t\treturn this._renderSubView(sub, view, suburl);\n\t\t});\n\t}\n\n\tprivate _renderSubView(\n\t\t\t\t\tsub:ISubView,\n\t\t\t\t\tview:IJetView,\n\t\t\t\t\tsuburl:IJetURL):Promise<webix.ui.baseview>{\n\t\tconst cell = this.app.webix.$$(sub.id);\n\t\treturn view.render(cell, suburl, this).then(ui => {\n\t\t\t// destroy old view\n\t\t\tif (sub.view && sub.view !== view){\n\t\t\t\tsub.view.destructor();\n\t\t\t}\n\n\t\t\t// save info about a new view\n\t\t\tsub.view = view;\n\t\t\tsub.id = ui.config.id as string;\n\n\t\t\tif (view instanceof JetView){\n\t\t\t\tview._parentFrame = sub;\n\t\t\t}\n\n\t\t\treturn ui;\n\t\t});\n\t}\n\n\tprivate _finishShow(url:IJetURL, path:string) : Promise<any>{\n\t\tlet next;\n\t\tif (this._index){\n\t\t\tnext = this._renderPartial(url.slice(this._index-1));\n\t\t\tthis.app.getRouter().set(path, { silent: true });\n\t\t\tthis.app.callEvent(\"app:route\", [url]);\n\t\t} else {\n\t\t\turl.map(a => a.index = 0);\n\t\t\tnext = this._renderPartial([null, ...url]);\n\t\t}\n\t\treturn next;\n\t}\n\n\tprivate _renderPartial(url:IJetURL){\n\t\tthis._init_url_data(url);\n\t\treturn this._urlChange(url);\n\t}\n\n\tprivate _destroyKids(){\n\t\t// destroy child views\n\t\tconst uis = this._children;\n\t\tfor (let i = uis.length - 1; i >= 0; i--){\n\t\t\tif (uis[i] && uis[i].destructor){\n\t\t\t\tuis[i].destructor();\n\t\t\t}\n\t\t}\n\n\t\t// reset vars for better GC processing\n\t\tthis._children = [];\n\t}\n}\n","import {IJetApp,IJetURL} from \"./interfaces\";\nimport {JetView} from \"./JetView\";\n\n\n// wrapper for raw objects and Jet 1.x structs\nexport class JetViewLegacy extends JetView{\n\tprivate _ui:any;\n\tprivate _windows: JetView[];\n\n\tconstructor(app:IJetApp, name:string, ui: any){\n\t\tsuper(app, name);\n\t\tthis._ui = ui;\n\t\tthis._windows = [];\n\t}\n\n\tgetRoot(){\n\t\tif (this.app.config.jet1xMode){\n\t\t\tconst parent = this.getParentView();\n\t\t\tif (parent){\n\t\t\t\treturn parent.getRoot();\n\t\t\t}\n\t\t}\n\n\t\treturn this._root;\n\t}\n\n\tconfig(){\n\t\treturn this._ui.$ui || this._ui;\n\t}\n\tdestructor(){\n\t\tconst destroy = this._ui.$ondestroy;\n\t\tif (destroy){\n\t\t\tdestroy();\n\t\t}\n\n\t\tfor (const window of this._windows){\n\t\t\twindow.destructor();\n\t\t}\n\n\t\tsuper.destructor();\n\t}\n\tshow(path:string, config:any){\n\t\tif (path.indexOf(\"/\") === 0 || path.indexOf(\"./\") === 0){\n\t\t\treturn super.show(path, config);\n\t\t}\n\t\tsuper.show(\"../\"+path, config);\n\t}\n\tinit(){\n\t\tif ((this.app.config as any).legacyEarlyInit){\n\t\t\tthis._realInitHandler();\n\t\t}\n\t}\n\tready(){\n\t\tif (!(this.app.config as any).legacyEarlyInit){\n\t\t\tthis._realInitHandler();\n\t\t}\n\t}\n\tprotected _realInitHandler(){\n\t\tconst init = this._ui.$oninit;\n\t\tif (init){\n\t\t\tconst root = this.getRoot();\n\t\t\tinit(root, (root as any).$scope);\n\t\t}\n\n\t\tconst events = this._ui.$onevent;\n\t\tif (events){\n\t\t\tfor (const key in events){\n\t\t\t\tthis.on(this.app, key, events[key]);\n\t\t\t}\n\t\t}\n\n\t\tconst windows = this._ui.$windows;\n\t\tif (windows){\n\t\t\tfor (const conf of windows){\n\t\t\t\tif (conf.$ui){\n\t\t\t\t\tconst view = new JetViewLegacy(this.app, this.getName(), conf);\n\t\t\t\t\tview.render(document.body);\n\t\t\t\t\tthis._windows.push(view);\n\t\t\t\t} else {\n\t\t\t\t\tthis.ui(conf);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _urlChange(url : IJetURL):Promise<any>{\n\t\treturn super._urlChange(url).then(() => {\n\t\t\tconst onurlchange = this._ui.$onurlchange;\n\t\t\tif (onurlchange){\n\t\t\t\tconst root = this.getRoot();\n\t\t\t\tonurlchange(url[0].params, url.slice(1), (root as any).$scope);\n\t\t\t}\n\t\t});\n\t}\n}","import {IJetApp} from \"./interfaces\";\nimport {JetView} from \"./JetView\";\n\n\n// wrapper for raw objects and Jet 1.x structs\nexport class JetViewRaw extends JetView{\n\tprivate _ui:any;\n\n\tconstructor(app:IJetApp, name:string, ui: any){\n\t\tsuper(app, name);\n\t\tthis._ui = ui;\n\t}\n\n\tconfig(){\n\t\treturn this._ui;\n\t}\n}","/*!\r\n * webix-routie - router for Webix-Jet\r\n * v0.4.0\r\n * MIT License\r\n *\r\n * based on routie - a tiny hash router\r\n * http://projects.jga.me/routie\r\n * copyright Greg Allen 2016\r\n * MIT License\r\n*/\r\n\r\nvar Routie = function(w, isModule) {\r\n\r\n  var routes = [];\r\n  var map = {};\r\n  var reference = 'routie';\r\n  var oldReference = w[reference];\r\n  var oldUrl;\r\n\r\n  var Route = function(path, name) {\r\n    this.name = name;\r\n    this.path = path;\r\n    this.keys = [];\r\n    this.fns = [];\r\n    this.params = {};\r\n    this.regex = pathToRegexp(this.path, this.keys, false, false);\r\n\r\n  };\r\n\r\n  Route.prototype.addHandler = function(fn) {\r\n    this.fns.push(fn);\r\n  };\r\n\r\n  Route.prototype.removeHandler = function(fn) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      var f = this.fns[i];\r\n      if (fn == f) {\r\n        this.fns.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  Route.prototype.run = function(params) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      if (this.fns[i].apply(this, params) === false)\r\n        return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  Route.prototype.match = function(path, params){\r\n    var m = this.regex.exec(path);\r\n\r\n    if (!m) return false;\r\n\r\n\r\n    for (var i = 1, len = m.length; i < len; ++i) {\r\n      var key = this.keys[i - 1];\r\n\r\n      var val = ('string' == typeof m[i]) ? decodeURIComponent(m[i]) : m[i];\r\n\r\n      if (key) {\r\n        this.params[key.name] = val;\r\n      }\r\n      params.push(val);\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  Route.prototype.toURL = function(params) {\r\n    var path = this.path;\r\n    for (var param in params) {\r\n      path = path.replace('/:'+param, '/'+params[param]);\r\n    }\r\n    path = path.replace(/\\/:.*\\?/g, '/').replace(/\\?/g, '');\r\n    if (path.indexOf(':') != -1) {\r\n      throw new Error('missing parameters for url: '+path);\r\n    }\r\n    return path;\r\n  };\r\n\r\n  var pathToRegexp = function(path, keys, sensitive, strict) {\r\n    if (path instanceof RegExp) return path;\r\n    if (path instanceof Array) path = '(' + path.join('|') + ')';\r\n    path = path\r\n      .concat(strict ? '' : '/?')\r\n      .replace(/\\/\\(/g, '(?:/')\r\n      .replace(/\\+/g, '__plus__')\r\n      .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, function(_, slash, format, key, capture, optional){\r\n        keys.push({ name: key, optional: !! optional });\r\n        slash = slash || '';\r\n        return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '');\r\n      })\r\n      .replace(/([/.])/g, '\\\\$1')\r\n      .replace(/__plus__/g, '(.+)')\r\n      .replace(/\\*/g, '(.*)');\r\n    return new RegExp('^' + path + '$', sensitive ? '' : 'i');\r\n  };\r\n\r\n  var addHandler = function(path, fn) {\r\n    var s = path.split(' ');\r\n    var name = (s.length == 2) ? s[0] : null;\r\n    path = (s.length == 2) ? s[1] : s[0];\r\n\r\n    if (!map[path]) {\r\n      map[path] = new Route(path, name);\r\n      routes.push(map[path]);\r\n    }\r\n    map[path].addHandler(fn);\r\n  };\r\n\r\n  var routie = function(path, fn) {\r\n    if (typeof fn == 'function') {\r\n      addHandler(path, fn);\r\n      routie.reload();\r\n    } else if (typeof path == 'object') {\r\n      for (var p in path) {\r\n        addHandler(p, path[p]);\r\n      }\r\n      routie.reload();\r\n    } else if (typeof fn === 'undefined') {\r\n      routie.navigate(path);\r\n    }\r\n  };\r\n\r\n  routie.lookup = function(name, obj) {\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      if (route.name == name) {\r\n        return route.toURL(obj);\r\n      }\r\n    }\r\n  };\r\n\r\n  routie.remove = function(path, fn) {\r\n    var route = map[path];\r\n    if (!route)\r\n      return;\r\n    route.removeHandler(fn);\r\n  };\r\n\r\n  routie.removeAll = function() {\r\n    map = {};\r\n    routes = [];\r\n    oldUrl = '';\r\n  };\r\n\r\n  routie.navigate = function(path, options) {\r\n    options = options || {};\r\n    var silent = options.silent || false;\r\n\r\n    if (silent) {\r\n      removeListener();\r\n    }\r\n    setTimeout(function() {\r\n      window.location.hash = path;\r\n\r\n      if (silent) {\r\n        setTimeout(function() { \r\n          addListener();\r\n        }, 1);\r\n      }\r\n\r\n    }, 1);\r\n  };\r\n\r\n  routie.noConflict = function() {\r\n    w[reference] = oldReference;\r\n    return routie;\r\n  };\r\n\r\n  var getHash = function() {\r\n    return window.location.hash.substring(1);\r\n  };\r\n\r\n  var checkRoute = function(hash, route) {\r\n    var params = [];\r\n    if (route.match(hash, params)) {\r\n      return (route.run(params) !== false ? 1 : 0);\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  var hashChanged = routie.reload = function() {\r\n    var hash = getHash();\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      var state = checkRoute(hash, route);\r\n      if (state === 1) {\r\n        //route processed\r\n        oldUrl = hash;\r\n        break;\r\n      } else if (state === 0){\r\n        //route rejected\r\n        routie.navigate(oldUrl, { silent:true });\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  var addListener = function() {\r\n    if (w.addEventListener) {\r\n      w.addEventListener('hashchange', hashChanged, false);\r\n    } else {\r\n      w.attachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n\r\n  var removeListener = function() {\r\n    if (w.removeEventListener) {\r\n      w.removeEventListener('hashchange', hashChanged);\r\n    } else {\r\n      w.detachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n  addListener();\r\n  oldUrl = getHash();\r\n\r\n  if (isModule){\r\n    return routie;\r\n  } else {\r\n    w[reference] = routie;\r\n  }\r\n   \r\n};\r\n\r\nif (typeof module == 'undefined'){\r\n  Routie(window);\r\n} else {\r\n  module.exports = Routie(window,true);\r\n  module.exports.default = module.exports;\r\n}","import routie from \"webix-routie/lib/routie\";\n\nimport {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\n\n\nexport class HashRouter implements IJetRouter{\n\tprivate config:any;\n\tprivate _lastUrl:string;\n\tprivate _prefix:string;\n\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.config = config || {};\n\t\tthis._prefix = this.config.routerPrefix;\n\n\t\t// use \"#!\" for backward compatibility\n\t\tif (typeof this._prefix === \"undefined\"){\n\t\t\tthis._prefix = \"!\";\n\t\t}\n\n\t\tlet rcb = function(_$a){ /* stub */ };\n\t\troutie(this._prefix+\"*\", () => {\n\t\t\tthis._lastUrl = \"\";\n\t\t\treturn rcb(this.get());\n\t\t});\n\t\trcb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tif (this.config.routes){\n\t\t\tconst compare = path.split(\"?\",2);\n\t\t\tfor (const key in this.config.routes){\n\t\t\t\tif (this.config.routes[key] === compare[0]){\n\t\t\t\t\tpath = key+(compare.length > 1 ? \"?\"+compare[1] : \"\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._lastUrl = path;\n\t\t(routie as any).navigate(this._prefix+path, config);\n\t}\n\tget(){\n\t\tlet path =  this._lastUrl ||\n\t\t\t\t\t(window.location.hash || \"\").replace(\"#\"+this._prefix,\"\");\n\n\t\tif (this.config.routes){\n\t\t\tconst compare = path.split(\"?\",2);\n\t\t\tconst key = this.config.routes[compare[0]];\n\t\t\tif (key){\n\t\t\t\tpath = key+(compare.length > 1 ? \"?\"+compare[1] : \"\");\n\t\t\t}\n\t\t}\n\t\treturn path;\n\t}\n}","const w = webix as any;\nconst version = webix.version.split(\".\") as any[];\n\n// will be fixed in webix 5.3\nif (version[0]*10+version[1]*1 < 53) {\n\tw.ui.freeze = function(handler):any{\n\t\t// disabled because webix jet 5.0 can't handle resize of scrollview correctly\n\t\t// w.ui.$freeze = true;\n\t\tconst res = handler();\n\t\tif (res && res.then){\n\t\t\tres.then(function(some){\n\t\t\t\tw.ui.$freeze = false;\n\t\t\t\tw.ui.resize();\n\t\t\t\treturn some;\n\t\t\t});\n\t\t} else {\n\t\t\tw.ui.$freeze = false;\n\t\t\tw.ui.resize();\n\t\t}\n\t\treturn res;\n\t};\n}\n\n// adding views as classes\nconst baseAdd = w.ui.baselayout.prototype.addView as any;\nconst baseRemove = w.ui.baselayout.prototype.removeView as any;\n\nconst config = {\n\taddView(view, index){\n\t\tif (this.$scope && this.$scope.webixJet){\n\t\t\tconst jview = this.$scope;\n\t\t\tconst subs = {};\n\n\t\t\tview = jview.app.copyConfig(view, {}, subs);\n\t\t\tbaseAdd.apply(this, [view, index]);\n\n\t\t\tfor (const key in subs){\n\t\t\t\tjview._renderFrame(key, subs[key], jview.getUrl()).then(() => {\n\t\t\t\t\tjview._subs[key] = subs[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn view.id;\n\t\t} else {\n\t\t\treturn baseAdd.apply(this, arguments);\n\t\t}\n\t},\n\tremoveView(){\n\t\tbaseRemove.apply(this, arguments);\n\t\tif (this.$scope && this.$scope.webixJet){\n\t\t\tconst subs = this.$scope._subs;\n\t\t\tfor(const key in subs){\n\t\t\t\tif (!webix.$$(subs[key].id)){\n\t\t\t\t\tdelete subs[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nw.extend(w.ui.layout.prototype, config, true);\nw.extend(w.ui.baselayout.prototype, config, true);\n\n// wrapper for using Jet Apps as views\n\nwebix.protoUI({\n\tname:\"jetapp\",\n\t$init(cfg){\n\t\tthis.$app = new this.app(cfg);\n\n\t\tconst id = webix.uid().toString();\n\t\tcfg.body = { id };\n\n\t\tthis.$ready.push(function(){\n\t\t\tthis.$app.render(webix.$$(id));\n\t\t});\n\t}\n}, (webix.ui as any).proxy);\n\ndeclare namespace webix {\n\tnamespace ui { \n\t\tclass jetapp extends webix.ui.view{\n\t\t}\n\t}\n}","import { JetBase } from \"./JetBase\";\nimport { JetViewLegacy } from \"./JetViewLegacy\";\nimport { JetViewRaw } from \"./JetViewRaw\";\n\nimport {\n\tIJetApp, IJetConfig, IJetRouter,\n\tIJetURL, IJetURLChunk,\n\tIJetView, ISubView, IViewConfig, IWebixFacade } from \"./interfaces\";\n\nimport { HashRouter } from \"./routers/HashRouter\";\n\nimport { parse, url2str } from \"./helpers\";\nimport \"./patch\";\n\n// webpack require\ndeclare function require(_$url: string): any;\n\n\nexport class JetApp extends JetBase implements IJetApp {\n\tpublic config: IJetConfig;\n\tpublic webix: IWebixFacade;\n\n\tcallEvent: (name: string, parameters: any[]) => boolean;\n\tattachEvent: (name: string, handler: any) => void;\n\n\tprivate $router: IJetRouter;\n\tprivate _view: IJetView;\n\tprivate _services: { [name: string]: any };\n\n\tconstructor(config: any) {\n\t\tsuper();\n\t\tthis.webix = config.webix || webix;\n\n\t\t// init config\n\t\tthis.config = this.webix.extend({\n\t\t\tname: \"App\",\n\t\t\tversion: \"1.0\",\n\t\t\tstart: \"/home\"\n\t\t}, config, true);\n\n\t\tthis._name = this.config.name;\n\t\tthis._services = {};\n\n\t\twebix.extend(this, webix.EventSystem);\n\t}\n\n\tgetService(name: string) {\n\t\tlet obj = this._services[name];\n\t\tif (typeof obj === \"function\") {\n\t\t\tobj = this._services[name] = obj(this);\n\t\t}\n\t\treturn obj;\n\t}\n\tsetService(name: string, handler: any) {\n\t\tthis._services[name] = handler;\n\t}\n\t// copy object and collect extra handlers\n\tcopyConfig(obj: any, target: any, config: IViewConfig) {\n\t\t// raw ui config\n\t\tif (obj.$ui) {\n\t\t\tobj = { $subview: new JetViewLegacy(this, \"\", obj) };\n\t\t} else if (obj instanceof JetBase ||\n\t\t\t\t\t(typeof obj === \"function\" && obj.prototype instanceof JetBase)){\n\t\t\tobj = { $subview: obj };\n\t\t}\n\n\t\t// subview placeholder\n\t\tif (obj.$subview) {\n\t\t\treturn this.addSubView(obj, target, config);\n\t\t}\n\n\t\t// process sub-properties\n\t\ttarget = target || (obj instanceof Array ? [] : {});\n\t\tfor (const method in obj) {\n\t\t\tlet point = obj[method];\n\n\t\t\t// view class\n\t\t\tif (typeof point === \"function\" && point.prototype instanceof JetBase) {\n\t\t\t\tpoint = { $subview : point };\n\t\t\t}\n\n\t\t\tif (point && typeof point === \"object\" &&\n\t\t\t\t!(point instanceof webix.DataCollection) && !(point instanceof RegExp)) {\n\t\t\t\tif (point instanceof Date) {\n\t\t\t\t\ttarget[method] = new Date(point);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[method] = this.copyConfig(\n\t\t\t\t\t\tpoint,\n\t\t\t\t\t\t(point instanceof Array ? [] : {}),\n\t\t\t\t\t\tconfig);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttarget[method] = point;\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tgetRouter() {\n\t\treturn this.$router;\n\t}\n\n\tclickHandler(e: Event) {\n\t\tif (e) {\n\t\t\tconst target: HTMLElement = (e.target || e.srcElement) as HTMLElement;\n\t\t\tif (target && target.getAttribute) {\n\t\t\t\tconst trigger: string = target.getAttribute(\"trigger\");\n\t\t\t\tif (trigger) {\n\t\t\t\t\tthis.trigger(trigger);\n\t\t\t\t}\n\t\t\t\tconst route: string = target.getAttribute(\"route\");\n\t\t\t\tif (route) {\n\t\t\t\t\tthis.show(route);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trefresh(){\n\t\tconst temp = this._container;\n\t\t//enforce view recreation\n\t\tthis._view._name = webix.uid()+\"\";\n\t\tthis._container = null;\n\t\tthis.render(temp, parse(this.getRouter().get()), this._parent);\n\t}\n\n\tloadView(url): Promise<any> {\n\t\tconst views = this.config.views;\n\t\tlet result = null;\n\n\t\tif (url === \"\"){\n\t\t\treturn Promise.resolve(\n\t\t\t\tthis._loadError(\"\", new Error(\"Webix Jet: Empty url segment\"))\n\t\t\t);\n\t\t}\n\n\t\ttry {\n\t\t\tif (views) {\n\t\t\t\tif (typeof views === \"function\") {\n\t\t\t\t\t// custom loading strategy\n\t\t\t\t\tresult = views(url);\n\t\t\t\t} else {\n\t\t\t\t\t// predefined hash\n\t\t\t\t\tresult = views[url];\n\t\t\t\t}\n\t\t\t\tif (typeof result === \"string\"){\n\t\t\t\t\turl = result;\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!result){\n\t\t\t\turl = url.replace(/\\./g, \"/\");\n\t\t\t\tresult = require(\"jet-views/\"+url);\n\t\t\t}\n\t\t} catch(e){\n\t\t\tresult = this._loadError(url, e);\n\t\t}\n\n\t\t// custom handler can return view or its promise\n\t\tif (!result.then){\n\t\t\tresult = Promise.resolve(result);\n\t\t}\n\n\t\t// set error handler\n\t\tresult = result\n\t\t\t.then(module => module.__esModule ? module.default : module)\n\t\t\t.catch(err => this._loadError(url, err));\n\n\t\treturn result;\n\t}\n\n\tcreateFromURL(url: IJetURLChunk[], now?: IJetView): Promise<IJetView> {\n\t\tconst chunk = url[0];\n\t\tconst name = chunk.page;\n\n\t\tlet view;\n\t\tif (now && now.getName() === name) {\n\t\t\tview = Promise.resolve(now);\n\t\t} else {\n\t\t\tview = this.loadView(chunk.page)\n\t\t\t\t.then(ui => this.createView(ui, name));\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tcreateView(ui:any, name?:string){\n\t\tlet obj;\n\t\tif (typeof ui === \"function\") {\n\t\t\tif (ui.prototype instanceof JetBase) {\n\t\t\t\t// UI class\n\t\t\t\treturn new ui(this, name);\n\t\t\t} else {\n\t\t\t\t// UI factory functions\n\t\t\t\tui = ui();\n\t\t\t}\n\t\t}\n\n\t\tif (ui instanceof JetBase){\n\t\t\tobj = ui;\n\t\t} else {\n\t\t\t// UI object\n\t\t\tif (ui.$ui) {\n\t\t\t\tobj = new JetViewLegacy(this, name, ui);\n\t\t\t} else {\n\t\t\t\tobj = new JetViewRaw(this, name, ui);\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// show view path\n\tshow(name: string) : Promise<any> {\n\t\tif (this.$router.get() !== name) {\n\t\t\treturn this._render(name);\n\t\t} else {\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\t}\n\n\tcanNavigate(url: string, view?:IJetView):Promise<string>{\n\t\tconst obj = {\n\t\t\turl:parse(url),\n\t\t\tredirect:url,\n\t\t\tconfirm: Promise.resolve(true)\n\t\t};\n\n\t\tconst res = this.callEvent(\"app:guard\", [url, (view || this._view), obj]);\n\t\tif (!res){\n\t\t\treturn Promise.reject(\"\");\n\t\t}\n\n\t\treturn obj.confirm.catch(() => obj.redirect = null).then(() => obj.redirect);\n\t}\n\n\tdestructor() {\n\t\tthis._view.destructor();\n\t}\n\n\t// event helpers\n\ttrigger(name: string, ...rest: any[]) {\n\t\tthis.apply(name, rest);\n\t}\n\tapply(name: string, data: any[]) {\n\t\tthis.callEvent(name, data);\n\t}\n\taction(name: string) {\n\t\treturn this.webix.bind(function(...rest: any[]) {\n\t\t\tthis.apply(name, rest);\n\t\t}, this);\n\t}\n\ton(name: string, handler) {\n\t\tthis.attachEvent(name, handler);\n\t}\n\n\tuse(plugin, config){\n\t\tplugin(this, null, config);\n\t}\n\n\terror(name:string, er:any[]){\n\t\tthis.callEvent(name, er);\n\t\tthis.callEvent(\"app:error\", er);\n\n\t\t/* tslint:disable */\n\t\tif (this.config.debug){\n\t\t\tfor (var i=0; i<er.length; i++){\n\t\t\t\tconsole.error(er[i]);\n\t\t\t\tif (er[i] instanceof Error){\n\t\t\t\t\tlet text = er[i].message;\n\t\t\t\t\tif (text.indexOf(\"Module build failed\") === 0){\n\t\t\t\t\t\ttext = text.replace(/\\x1b\\[[0-9;]*m/g,\"\");\n\t\t\t\t\t\tdocument.body.innerHTML = `<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>${text}</pre>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttext += \"<br><br>Check console for more details\";\n\t\t\t\t\t\twebix.message({ type:\"error\", text:text, expire:-1 });\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tdebugger;\n\t\t}\n\t\t/* tslint:enable */\n\t}\n\n\t// renders top view\n\tprotected _render(url: string | IJetURL): Promise<IJetView> {\n\t\tconst firstInit = !this.$router;\n\t\tif (firstInit){\n\t\t\twebix.attachEvent(\"onClick\", e => this.clickHandler(e));\n\t\t\turl = this._first_start(url);\n\t\t}\n\n\t\tconst strUrl = typeof url === \"string\" ? url : url2str(url);\n\n\t\treturn this.canNavigate(strUrl).then(newurl => {\n\t\t\tif (newurl !== null){\n\t\t\t\tthis.$router.set(newurl, { silent:true });\n\t\t\t\treturn this._render_stage(newurl);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tprotected _render_stage(url): Promise<IJetView>{\n\t\tconst parsed = (typeof url === \"string\") ? parse(url) : url;\n\n\t\t// block resizing while rendering parts of UI\n\t\treturn (webix.ui as any).freeze(() =>\n\t\t\tthis.createFromURL(parsed, this._view).then(view => {\n\t\t\t\t// save reference for old and new views\n\t\t\t\tconst oldview = this._view;\n\t\t\t\tthis._view = view;\n\n\t\t\t\t// render url state for the root\n\t\t\t\treturn view.render(this._container, parsed, this._parent).then(root => {\n\t\t\t\t\t// destroy and detach old view\n\t\t\t\t\tif (oldview && oldview !== this._view) {\n\t\t\t\t\t\toldview.destructor();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._view.getRoot().getParentView()){\n\t\t\t\t\t\tthis._container = root;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._root = root;\n\n\t\t\t\t\tthis.callEvent(\"app:route\", [parsed]);\n\t\t\t\t\treturn view;\n\t\t\t\t});\n\t\t\t}).catch(er => {\n\t\t\t\tthis.error(\"app:error:render\", [er]);\n\t\t\t})\n\t\t);\n\t}\n\n\tprotected _urlChange(_$url:IJetURL):Promise<any>{\n\t\talert(\"Not implemented\");\n\t\treturn Promise.resolve(true);\n\t}\n\n\tprivate _first_start(url: string | IJetURL){\n\t\tconst cb = a => setTimeout(() => {\n\t\t\tthis._render(a);\n\t\t},1);\n\t\tthis.$router = new (this.config.router || HashRouter)(cb, this.config);\n\n\t\t// start animation for top-level app\n\t\tif (this._container === document.body && this.config.animation !== false) {\n\t\t\tconst node = this._container as HTMLElement;\n\t\t\twebix.html.addCss(node, \"webixappstart\");\n\t\t\tsetTimeout(() => {\n\t\t\t\twebix.html.removeCss(node, \"webixappstart\");\n\t\t\t\twebix.html.addCss(node, \"webixapp\");\n\t\t\t}, 10);\n\t\t}\n\n\t\tif (!url || url.length === 1){\n\t\t\turl = this.$router.get() || this.config.start;\n\t\t\tthis.$router.set(url, { silent: true });\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// error during view resolving\n\tprivate _loadError(url: string, err: Error):any{\n\t\tthis.error(\"app:error:resolve\", [err, url]);\n\t\treturn { template:\" \" };\n\t}\n\n\tprivate addSubView(obj, target, config:IViewConfig) : ISubView {\n\t\tconst url = obj.$subview !== true ? obj.$subview : null;\n\t\tconst name: string = obj.name || (url ? this.webix.uid() : \"default\");\n\t\ttarget.id = obj.id || \"s\" + this.webix.uid();\n\t\tconst view : ISubView = config[name] = { id: target.id, url };\n\t\tif (view.url instanceof JetBase) {\n\t\t\tview.view = view.url;\n\t\t}\n\n\t\treturn target;\n\t}\n}\n","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class StoreRouter implements IJetRouter{\n\tprivate name:string;\n\tprivate cb: IJetRouterCallback;\n\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.name = (config.storeName || config.id+\":route\");\n\t\tthis.cb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\twebix.storage.session.put(this.name, path);\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget(){\n\t\treturn webix.storage.session.get(this.name);\n\t}\n}","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class UrlRouter implements IJetRouter{\n\tprivate cb: IJetRouterCallback;\n\tprivate prefix:string;\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.cb = cb;\n\n\t\twindow.onpopstate = () => this.cb(this.get());\n\t\tthis.prefix = config.routerPrefix || \"\";\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tif (this.get() !== path){\n\t\t\twindow.history.pushState(null, null, this.prefix + path);\n\t\t}\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget():string{\n\t\tconst path = window.location.pathname.replace(this.prefix, \"\");\n\t\treturn path !== \"/\" ? path : \"\";\n\t}\n}","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class EmptyRouter implements IJetRouter{\n\tprivate path: string;\n\tprivate cb: IJetRouterCallback;\n\n\tconstructor(cb: IJetRouterCallback, _$config:any){\n\t\tthis.path = \"\";\n\t\tthis.cb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tthis.path = path;\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget(){\n\t\treturn this.path;\n\t}\n}","import {IJetApp, IJetURL, IJetView} from \"../interfaces\";\n\nexport function UnloadGuard(app: IJetApp, view: IJetView, config: any){\n\tview.on(app, `app:guard`, function(_$url:IJetURL, point:IJetView, promise:any){\n\t\tif (point === view || point.contains(view)){\n\t\t\tconst res = config();\n\t\t\tif (res === false){\n\t\t\t\tpromise.confirm = Promise.reject(res);\n\t\t\t} else {\n\t\t\t\tpromise.confirm = promise.confirm.then(() => res);\n\t\t\t}\n\t\t}\n\t});\n}","//     (c) 2012-2018 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n'use strict';\n\n// var has = require('has');\nfunction has(store, key) {\n  return Object.prototype.hasOwnProperty.call(store, key);\n}\n// var forEach = require('for-each');\nfunction forEach(obj, handler, context) {\n  for (var key in obj) {\n    if (has(obj, key)) {\n      handler.call((context || obj), obj[key], key, obj);\n    }\n  }\n}\n// var trim = require('string.prototype.trim');\nfunction trim(str) {\n  return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n// var warning = require('warning');\nfunction warn(message) {\n  message = 'Warning: ' + message;\n  if (typeof console !== 'undefined') {\n    console.error(message);\n  }\n\n  try { throw new Error(message); } catch (x) {}\n}\n\nvar replace = String.prototype.replace;\nvar split = String.prototype.split;\n\n// #### Pluralization methods\n// The string that separates the different phrase possibilities.\nvar delimiter = '||||';\n\nvar russianPluralGroups = function (n) {\n  var end = n % 10;\n  if (n !== 11 && end === 1) {\n    return 0;\n  }\n  if (2 <= end && end <= 4 && !(n >= 12 && n <= 14)) {\n    return 1;\n  }\n  return 2;\n};\n\n// Mapping from pluralization group plural logic.\nvar pluralTypes = {\n  arabic: function (n) {\n    // http://www.arabeyes.org/Plural_Forms\n    if (n < 3) { return n; }\n    var lastTwo = n % 100;\n    if (lastTwo >= 3 && lastTwo <= 10) return 3;\n    return lastTwo >= 11 ? 4 : 5;\n  },\n  bosnian_serbian: russianPluralGroups,\n  chinese: function () { return 0; },\n  croatian: russianPluralGroups,\n  french: function (n) { return n > 1 ? 1 : 0; },\n  german: function (n) { return n !== 1 ? 1 : 0; },\n  russian: russianPluralGroups,\n  lithuanian: function (n) {\n    if (n % 10 === 1 && n % 100 !== 11) { return 0; }\n    return n % 10 >= 2 && n % 10 <= 9 && (n % 100 < 11 || n % 100 > 19) ? 1 : 2;\n  },\n  czech: function (n) {\n    if (n === 1) { return 0; }\n    return (n >= 2 && n <= 4) ? 1 : 2;\n  },\n  polish: function (n) {\n    if (n === 1) { return 0; }\n    var end = n % 10;\n    return 2 <= end && end <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n  },\n  icelandic: function (n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; },\n  slovenian: function (n) {\n    var lastTwo = n % 100;\n    if (lastTwo === 1) {\n      return 0;\n    }\n    if (lastTwo === 2) {\n      return 1;\n    }\n    if (lastTwo === 3 || lastTwo === 4) {\n      return 2;\n    }\n    return 3;\n  }\n};\n\n\n// Mapping from pluralization group to individual language codes/locales.\n// Will look up based on exact match, if not found and it's a locale will parse the locale\n// for language code, and if that does not exist will default to 'en'\nvar pluralTypeToLanguages = {\n  arabic: ['ar'],\n  bosnian_serbian: ['bs-Latn-BA', 'bs-Cyrl-BA', 'srl-RS', 'sr-RS'],\n  chinese: ['id', 'id-ID', 'ja', 'ko', 'ko-KR', 'lo', 'ms', 'th', 'th-TH', 'zh'],\n  croatian: ['hr', 'hr-HR'],\n  german: ['fa', 'da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hi-IN', 'hu', 'hu-HU', 'it', 'nl', 'no', 'pt', 'sv', 'tr'],\n  french: ['fr', 'tl', 'pt-br'],\n  russian: ['ru', 'ru-RU'],\n  lithuanian: ['lt'],\n  czech: ['cs', 'cs-CZ', 'sk'],\n  polish: ['pl'],\n  icelandic: ['is'],\n  slovenian: ['sl-SL']\n};\n\nfunction langToTypeMap(mapping) {\n  var ret = {};\n  forEach(mapping, function (langs, type) {\n    forEach(langs, function (lang) {\n      ret[lang] = type;\n    });\n  });\n  return ret;\n}\n\nfunction pluralTypeName(locale) {\n  var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n  return langToPluralType[locale]\n    || langToPluralType[split.call(locale, /-/, 1)[0]]\n    || langToPluralType.en;\n}\n\nfunction pluralTypeIndex(locale, count) {\n  return pluralTypes[pluralTypeName(locale)](count);\n}\n\nfunction escape(token) {\n  return token.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction constructTokenRegex(opts) {\n  var prefix = (opts && opts.prefix) || '%{';\n  var suffix = (opts && opts.suffix) || '}';\n\n  if (prefix === delimiter || suffix === delimiter) {\n    throw new RangeError('\"' + delimiter + '\" token is reserved for pluralization');\n  }\n\n  return new RegExp(escape(prefix) + '(.*?)' + escape(suffix), 'g');\n}\n\nvar dollarRegex = /\\$/g;\nvar dollarBillsYall = '$$';\nvar defaultTokenRegex = /%\\{(.*?)\\}/g;\n\n// ### transformPhrase(phrase, substitutions, locale)\n//\n// Takes a phrase string and transforms it by choosing the correct\n// plural form and interpolating it.\n//\n//     transformPhrase('Hello, %{name}!', {name: 'Spike'});\n//     // \"Hello, Spike!\"\n//\n// The correct plural form is selected if substitutions.smart_count\n// is set. You can pass in a number instead of an Object as `substitutions`\n// as a shortcut for `smart_count`.\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 1}, 'en');\n//     // \"1 new message\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 2}, 'en');\n//     // \"2 new messages\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', 5, 'en');\n//     // \"5 new messages\"\n//\n// You should pass in a third argument, the locale, to specify the correct plural type.\n// It defaults to `'en'` with 2 plural forms.\nfunction transformPhrase(phrase, substitutions, locale, tokenRegex) {\n  if (typeof phrase !== 'string') {\n    throw new TypeError('Polyglot.transformPhrase expects argument #1 to be string');\n  }\n\n  if (substitutions == null) {\n    return phrase;\n  }\n\n  var result = phrase;\n  var interpolationRegex = tokenRegex || defaultTokenRegex;\n\n  // allow number as a pluralization shortcut\n  var options = typeof substitutions === 'number' ? { smart_count: substitutions } : substitutions;\n\n  // Select plural form: based on a phrase text that contains `n`\n  // plural forms separated by `delimiter`, a `locale`, and a `substitutions.smart_count`,\n  // choose the correct plural form. This is only done if `count` is set.\n  if (options.smart_count != null && result) {\n    var texts = split.call(result, delimiter);\n    result = trim(texts[pluralTypeIndex(locale || 'en', options.smart_count)] || texts[0]);\n  }\n\n  // Interpolate: Creates a `RegExp` object for each interpolation placeholder.\n  result = replace.call(result, interpolationRegex, function (expression, argument) {\n    if (!has(options, argument) || options[argument] == null) { return expression; }\n    // Ensure replacement value is escaped to prevent special $-prefixed regex replace tokens.\n    return replace.call(options[argument], dollarRegex, dollarBillsYall);\n  });\n\n  return result;\n}\n\n// ### Polyglot class constructor\nfunction Polyglot(options) {\n  var opts = options || {};\n  this.phrases = {};\n  this.extend(opts.phrases || {});\n  this.currentLocale = opts.locale || 'en';\n  var allowMissing = opts.allowMissing ? transformPhrase : null;\n  this.onMissingKey = typeof opts.onMissingKey === 'function' ? opts.onMissingKey : allowMissing;\n  this.warn = opts.warn || warn;\n  this.tokenRegex = constructTokenRegex(opts.interpolation);\n}\n\n// ### polyglot.locale([locale])\n//\n// Get or set locale. Internally, Polyglot only uses locale for pluralization.\nPolyglot.prototype.locale = function (newLocale) {\n  if (newLocale) this.currentLocale = newLocale;\n  return this.currentLocale;\n};\n\n// ### polyglot.extend(phrases)\n//\n// Use `extend` to tell Polyglot how to translate a given key.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The key can be any string.  Feel free to call `extend` multiple times;\n// it will override any phrases with the same key, but leave existing phrases\n// untouched.\n//\n// It is also possible to pass nested phrase objects, which get flattened\n// into an object with the nested keys concatenated using dot notation.\n//\n//     polyglot.extend({\n//       \"nav\": {\n//         \"hello\": \"Hello\",\n//         \"hello_name\": \"Hello, %{name}\",\n//         \"sidebar\": {\n//           \"welcome\": \"Welcome\"\n//         }\n//       }\n//     });\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}',\n//     //   'nav.sidebar.welcome': 'Welcome'\n//     // }\n//\n// `extend` accepts an optional second argument, `prefix`, which can be used\n// to prefix every key in the phrases object with some string, using dot\n// notation.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     }, \"nav\");\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}'\n//     // }\n//\n// This feature is used internally to support nested phrase objects.\nPolyglot.prototype.extend = function (morePhrases, prefix) {\n  forEach(morePhrases, function (phrase, key) {\n    var prefixedKey = prefix ? prefix + '.' + key : key;\n    if (typeof phrase === 'object') {\n      this.extend(phrase, prefixedKey);\n    } else {\n      this.phrases[prefixedKey] = phrase;\n    }\n  }, this);\n};\n\n// ### polyglot.unset(phrases)\n// Use `unset` to selectively remove keys from a polyglot instance.\n//\n//     polyglot.unset(\"some_key\");\n//     polyglot.unset({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The unset method can take either a string (for the key), or an object hash with\n// the keys that you would like to unset.\nPolyglot.prototype.unset = function (morePhrases, prefix) {\n  if (typeof morePhrases === 'string') {\n    delete this.phrases[morePhrases];\n  } else {\n    forEach(morePhrases, function (phrase, key) {\n      var prefixedKey = prefix ? prefix + '.' + key : key;\n      if (typeof phrase === 'object') {\n        this.unset(phrase, prefixedKey);\n      } else {\n        delete this.phrases[prefixedKey];\n      }\n    }, this);\n  }\n};\n\n// ### polyglot.clear()\n//\n// Clears all phrases. Useful for special cases, such as freeing\n// up memory if you have lots of phrases but no longer need to\n// perform any translation. Also used internally by `replace`.\nPolyglot.prototype.clear = function () {\n  this.phrases = {};\n};\n\n// ### polyglot.replace(phrases)\n//\n// Completely replace the existing phrases with a new set of phrases.\n// Normally, just use `extend` to add more phrases, but under certain\n// circumstances, you may want to make sure no old phrases are lying around.\nPolyglot.prototype.replace = function (newPhrases) {\n  this.clear();\n  this.extend(newPhrases);\n};\n\n\n// ### polyglot.t(key, options)\n//\n// The most-used method. Provide a key, and `t` will return the\n// phrase.\n//\n//     polyglot.t(\"hello\");\n//     => \"Hello\"\n//\n// The phrase value is provided first by a call to `polyglot.extend()` or\n// `polyglot.replace()`.\n//\n// Pass in an object as the second argument to perform interpolation.\n//\n//     polyglot.t(\"hello_name\", {name: \"Spike\"});\n//     => \"Hello, Spike\"\n//\n// If you like, you can provide a default value in case the phrase is missing.\n// Use the special option key \"_\" to specify a default.\n//\n//     polyglot.t(\"i_like_to_write_in_language\", {\n//       _: \"I like to write in %{language}.\",\n//       language: \"JavaScript\"\n//     });\n//     => \"I like to write in JavaScript.\"\n//\nPolyglot.prototype.t = function (key, options) {\n  var phrase, result;\n  var opts = options == null ? {} : options;\n  if (typeof this.phrases[key] === 'string') {\n    phrase = this.phrases[key];\n  } else if (typeof opts._ === 'string') {\n    phrase = opts._;\n  } else if (this.onMissingKey) {\n    var onMissingKey = this.onMissingKey;\n    result = onMissingKey(key, opts, this.currentLocale, this.tokenRegex);\n  } else {\n    this.warn('Missing translation for key: \"' + key + '\"');\n    result = key;\n  }\n  if (typeof phrase === 'string') {\n    result = transformPhrase(phrase, opts, this.currentLocale, this.tokenRegex);\n  }\n  return result;\n};\n\n\n// ### polyglot.has(key)\n//\n// Check if polyglot has a translation for given key\nPolyglot.prototype.has = function (key) {\n  return has(this.phrases, key);\n};\n\n// export transformPhrase\nPolyglot.transformPhrase = function transform(phrase, substitutions, locale) {\n  return transformPhrase(phrase, substitutions, locale);\n};\n\nmodule.exports = Polyglot;\n","import Polyglot from \"webix-polyglot\";\nimport {IJetApp, IJetView} from \"../interfaces\";\n\ndeclare function require(name:string):any;\n\nexport function Locale(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\tconst storage = config.storage;\n\tlet lang = storage ? (storage.get(\"lang\") || \"en\") : (config.lang || \"en\");\n\n\n\tconst service = {\n\t\t_:null,\n\t\tpolyglot: null,\n\t\tgetLang(){ return lang; },\n\t\tsetLang(name:string, silent? : boolean){\n\t\t\tconst path = (config.path ? config.path + \"/\" : \"\") + name;\n\t\t\tlet data = require(\"jet-locales/\"+path);\n\t\t\tif (data.__esModule) {\n\t\t\t\tdata = data.default;\n\t\t\t}\n\n\t\t\tconst poly = service.polyglot = new Polyglot({ phrases:data });\n\t\t\tpoly.locale(name);\n\n\t\t\tservice._ = webix.bind(poly.t, poly);\n\t\t\tlang = name;\n\n\t\t\tif (storage){\n\t\t\t\tstorage.put(\"lang\", lang);\n\t\t\t}\n\t\t\tif (!silent){\n\t\t\t\tapp.refresh();\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setService(\"locale\", service);\n\tservice.setLang(lang, true);\n}","import {IJetApp, IJetURL, IJetView} from \"../interfaces\";\n\nfunction show(view, config, value){\n\tif (config.urls){\n\t\tvalue = config.urls[value] || value;\n\t}\n\tview.show(\"./\"+value);\n}\nexport function Menu(app: IJetApp, view: IJetView, config: any){\n\tconst ui = view.$$(config.id || config) as any;\n\tlet silent = false;\n\n\tui.attachEvent(\"onchange\", function(){\n\t\tif (!silent){\n\t\t\tshow(view, config, this.getValue());\n\t\t}\n\t});\n\tui.attachEvent(\"onafterselect\", function(){\n\t\tif (!silent){\n\t\t\tlet id = null;\n\t\t\tif (ui.setValue){\n\t\t\t\tid = this.getValue();\n\t\t\t} else if (ui.getSelectedId){\n\t\t\t\tid = ui.getSelectedId();\n\t\t\t}\n\t\t\tshow(view, config, id);\n\t\t}\n\t});\n\n\tview.on(app, `app:route`, function(url:IJetURL){\n\t\tconst segment = url[view.getIndex()];\n\t\tif (segment){\n\t\t\tsilent = true;\n\t\t\tconst page = segment.page;\n\t\t\tif (ui.setValue && ui.getValue() !== page){\n\t\t\t\tui.setValue(page);\n\t\t\t} else if (ui.select && ui.exists(page) && ui.getSelectedId() !== page){\n\t\t\t\tui.select(page);\n\t\t\t}\n\t\t\tsilent = false;\n\t\t}\n\t});\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nconst baseicons = {\n\tgood:\t\"check\",\n\terror: \"warning\",\n\tsaving: \"refresh fa-spin\"\n};\n\nconst basetext = {\n\tgood:\t\"Ok\",\n\terror: \"Error\",\n\tsaving: \"Connecting...\"\n};\n\nexport function Status(app: IJetApp, view: IJetView, config: any){\n\n\tlet status = \"good\";\n\tlet count = 0;\n\tlet iserror = false;\n\tlet expireDelay = config.expire;\n\tif (!expireDelay && expireDelay !== false){\n\t\texpireDelay = 2000;\n\t}\n\tconst texts = config.texts || basetext;\n\tconst icons = config.icons || baseicons;\n\n\tif (typeof config === \"string\"){\n\t\tconfig = { target:config };\n\t}\n\n\tfunction refresh(content? : string) {\n\t\tconst area = view.$$(config.target);\n\t\tif (area) {\n\t\t\tif (!content){\n\t\t\t\tcontent = \"<div class='status_\" +\n\t\t\t\t\tstatus +\n\t\t\t\t\t\"'><span class='webix_icon fa-\" +\n\t\t\t\t\ticons[status] + \"'></span> \" + texts[status] + \"</div>\";\n\t\t\t}\n\t\t\t(area as webix.ui.template).setHTML(content);\n\t\t}\n\t}\n\tfunction success(){\n\t\tcount--;\n\t\tsetStatus(\"good\");\n\t}\n\tfunction fail(err){\n\t\tcount--;\n\t\tsetStatus(\"error\", err);\n\t}\n\tfunction start(promise){\n\t\tcount++;\n\t\tsetStatus(\"saving\");\n\t\tif (promise && promise.then){\n\t\t\tpromise.then(success, fail);\n\t\t}\n\t}\n\tfunction getStatus(){\n\t\treturn status;\n\t}\n\tfunction hideStatus(){\n\t\tif (count === 0){\n\t\t\trefresh(\" \");\n\t\t}\n\t}\n\tfunction setStatus(mode, err?){\n\t\tif (count < 0){\n\t\t\tcount = 0;\n\t\t}\n\n\t\tif (mode === \"saving\"){\n\t\t\tstatus = \"saving\";\n\t\t\trefresh();\n\t\t} else {\n\t\t\tiserror = (mode === \"error\");\n\t\t\tif (count === 0){\n\t\t\t\tstatus = iserror ? \"error\" : \"good\";\n\t\t\t\tif (iserror){\n\t\t\t\t\tapp.error(\"app:error:server\", [err.responseText || err]);\n\t\t\t\t} else {\n\t\t\t\t\tif (expireDelay){\n\t\t\t\t\t\tsetTimeout(hideStatus, expireDelay);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trefresh();\n\t\t\t}\n\t\t}\n\t}\n\tfunction track(data){\n\t\tconst dp = webix.dp(data);\n\t\tif (dp){\n\t\t\tview.on(dp, \"onAfterDataSend\", start);\n\t\t\tview.on(dp, \"onAfterSaveError\", (_id, _obj, response) => fail(response));\n\t\t\tview.on(dp, \"onAfterSave\", success);\n\t\t}\n\t}\n\n\tapp.setService(\"status\", {\n\t\tgetStatus,\n\t\tsetStatus,\n\t\ttrack\n\t});\n\n\tif (config.remote){\n\t\tview.on(webix, \"onRemoteCall\", start);\n\t}\n\n\tif (config.ajax){\n\t\tview.on(webix, \"onBeforeAjax\",\n\t\t\t(_mode, _url, _data, _request, _headers, _files, promise) => {\n\t\t\t\tstart(promise);\n\t\t});\n\t}\n\n\tif (config.data){\n\t\ttrack(config.data);\n\t}\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nexport function Theme(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\tconst storage = config.storage;\n\tlet theme = storage ?\n\t\t(storage.get(\"theme\")||\"flat-default\")\n\t\t:\n\t\t(config.theme || \"flat-default\");\n\n\tconst service = {\n\t\tgetTheme(){ return theme; },\n\t\tsetTheme(name:string, silent?:boolean){\n\t\t\tconst parts = name.split(\"-\");\n\t\t\tconst links = document.getElementsByTagName(\"link\");\n\n\t\t\tfor (let i=0; i<links.length; i++){\n\t\t\t\tconst lname = links[i].getAttribute(\"title\");\n\t\t\t\tif (lname){\n\t\t\t\t\tif (lname === name || lname === parts[0]){\n\t\t\t\t\t\tlinks[i].disabled = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlinks[i].disabled = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t(webix as any).skin.set(parts[0]);\n\t\t\t// remove old css\n\t\t\twebix.html.removeCss(document.body, \"theme-\"+theme);\n\t\t\t// add new css\n\t\t\twebix.html.addCss(document.body, \"theme-\"+name);\n\n\t\t\ttheme = name;\n\t\t\tif (storage){\n\t\t\t\tstorage.put(\"theme\", name);\n\t\t\t}\n\t\t\tif (!silent){\n\t\t\t\tapp.refresh();\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setService(\"theme\", service);\n\tservice.setTheme(theme, true);\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nfunction copyParams(view: IJetView, url, route){\n\tfor (let i = 0; i < route.length; i++){\n\t\tview.setParam(route[i], url[i+1] ? url[i+1].page : \"\");\n\t}\n\n}\nexport function UrlParam(app: IJetApp, view: IJetView, config: any){\n\tconst route = config.route || config;\n\tview.on(app, \"app:urlchange\", function(subview, url){\n\t\tif (view === subview){\n\t\t\tcopyParams(view, url, route);\n\t\t\turl.splice(1, route.length);\n\t\t}\n\t});\n\tview.on(app, \"app:paramchange\", function(subview, name, value, url){\n\t\tif (view === subview && url){\n\t\t\tfor (let i=0; i<route.length; i++){\n\t\t\t\tif (route[i] === name){\n\t\t\t\t\t// changing in the url\n\t\t\t\t\tview.show([i, value]);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tcopyParams(view, view.getUrl(), route);\n}\n","import {IJetApp, IJetView} from \"../interfaces\";\n\nexport function User(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\n\tconst login = config.login || \"/login\";\n\tconst logout = config.logout || \"/logout\";\n\tconst afterLogin = config.afterLogin || app.config.start;\n\tconst afterLogout = config.afterLogout || \"/login\";\n\tconst ping = config.ping || 5*60*1000;\n\tconst model = config.model;\n\tlet user = config.user;\n\n\tconst service = {\n\t\tgetUser(){\n\t\t\treturn user;\n\t\t},\n\t\tgetStatus(server? : boolean){\n\t\t\tif (!server){\n\t\t\t\treturn user !== null;\n\t\t\t}\n\n\t\t\treturn model.status().catch(() => null).then(data => {\n\t\t\t\tuser = data;\n\t\t\t});\n\t\t},\n\t\tlogin(name:string, pass:string){\n\t\t\treturn model.login(name, pass).then(data => {\n\t\t\t\tuser = data;\n\t\t\t\tif (!data){\n\t\t\t\t\tthrow new Error(\"Access denied\");\n\t\t\t\t}\n\n\t\t\t\tapp.callEvent(\"app:user:login\", [ user ]);\n\t\t\t\tapp.show(afterLogin);\n\t\t\t});\n\t\t},\n\t\tlogout(){\n\t\t\tuser = null;\n\t\t\treturn model.logout().then(res => {\n\t\t\t\tapp.callEvent(\"app:user:logout\",[]);\n\t\t\t\treturn res;\n\t\t\t});\n\t\t}\n\t};\n\n\tfunction canNavigate(url, obj){\n\t\tif (url === logout){\n\t\t\tservice.logout();\n\t\t\tobj.redirect = afterLogout;\n\t\t} else if (url !== login && !service.getStatus()){\n\t\t\tobj.redirect = login;\n\t\t}\n\t}\n\n\tapp.setService(\"user\", service);\n\n\tapp.attachEvent(`app:guard`, function(url: string, _$root: any, obj:any){\n\t\tif (typeof user === \"undefined\"){\n\t\t\tobj.confirm = service.getStatus(true).then(() => canNavigate(url, obj));\n\t\t}\n\n\t\treturn canNavigate(url, obj);\n\t});\n\n\tif (ping){\n\t\tsetInterval(() => service.getStatus(true), ping);\n\t}\n}","/*\nMIT License\nCopyright (c) 2018 XB Software\n*/\n\nimport { IJetApp, IJetView } from \"./interfaces\";\nexport { IJetApp, IJetView };\n\nexport { JetApp } \t\tfrom \"./JetApp\";\nexport { JetView } \t\tfrom \"./JetView\";\n\nexport { HashRouter } \tfrom \"./routers/HashRouter\";\nexport { StoreRouter }\tfrom \"./routers/StoreRouter\";\nexport { UrlRouter } \tfrom \"./routers/UrlRouter\";\nexport { EmptyRouter } \tfrom \"./routers/EmptyRouter\";\n\nimport {UnloadGuard} \tfrom \"./plugins/Guard\";\nimport {Locale} \t\tfrom \"./plugins/Locale\";\nimport {Menu} \t\t\tfrom \"./plugins/Menu\";\nimport {Status} \t\tfrom \"./plugins/Status\";\nimport {Theme} \t\t\tfrom \"./plugins/Theme\";\nimport {UrlParam}\t\tfrom \"./plugins/UrlParam\";\nimport {User} \t\t\tfrom \"./plugins/User\";\n\nexport const plugins = {\n\tUnloadGuard, Locale, Menu, Theme, User, Status, UrlParam\n};\n\nif (!(window as any).Promise){\n\t(window as any).Promise = webix.promise;\n}"],"names":["tslib_1.__extends","Polyglot"],"mappings":"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"}