{"version":3,"file":"jet.js","sources":["../../sources/JetBase.ts","../../sources/helpers.ts","../../sources/JetView.ts","../../sources/JetViewLegacy.ts","../../sources/JetViewRaw.ts","../../node_modules/webix-routie/lib/routie.js","../../sources/routers/HashRouter.ts","../../sources/patch.ts","../../sources/JetApp.ts","../../sources/routers/StoreRouter.ts","../../sources/routers/UrlRouter.ts","../../sources/routers/EmptyRouter.ts","../../sources/plugins/Guard.ts","../../node_modules/webix-polyglot/index.js","../../sources/plugins/Locale.ts","../../sources/plugins/Menu.ts","../../sources/plugins/Status.ts","../../sources/plugins/Theme.ts","../../sources/plugins/UrlParam.ts","../../sources/plugins/User.ts","../../sources/index.ts"],"sourcesContent":["import { IJetApp, IJetURL, IJetView,\n\tISubView, ISubViewInfo } from \"./interfaces\";\n\n\nexport abstract class JetBase implements IJetView{\n\tpublic app: IJetApp;\n\tpublic webixJet = true;\n\t//temporary workaround for app.refresh, next var must be private\n\tpublic _name: string;\n\tprotected _parent: IJetView;\n\tprotected _index: number;\n\tprotected _container: HTMLElement | webix.ui.baseview;\n\tprotected _root: webix.ui.baseview;\n\tprotected _id: number;\n\tprotected _events:{ id:string, obj: any }[];\n\tprotected _subs:{[name:string]:ISubView};\n\tprivate _data:{[name:string]:any};\n\tprivate _url:IJetURL;\n\n\n\tconstructor(){\n\t\tthis._id = webix.uid() as number;\n\n\t\tthis._events = [];\n\t\tthis._subs = {};\n\t\tthis._data = {};\n\t}\n\n\tgetRoot(): webix.ui.baseview {\n\t\treturn this._root;\n\t}\n\n\tdestructor() {\n\t\tconst events = this._events;\n\t\tfor (let i = events.length - 1; i >= 0; i--){\n\t\t\tevents[i].obj.detachEvent(events[i].id);\n\t\t}\n\n\t\t// destroy sub views\n\t\tfor (const key in this._subs){\n\t\t\tconst subView = this._subs[key].view;\n\t\t\t// it possible that subview was not loaded with any content yet\n\t\t\t// so check on null\n\t\t\tif (subView){\n\t\t\t\tsubView.destructor();\n\t\t\t}\n\t\t}\n\n\t\tthis._events = this._container = this.app = this._parent = null;\n\t}\n\tsetParam(id:string, value:any, url?:boolean){\n\t\tif (this._data[id] !== value){\n\t\t\tthis._data[id] = value;\n\t\t\tif (this.app.callEvent(\"app:paramchange\", [this, id, value, url])){\n\t\t\t\tif (url){\n\t\t\t\t\t// changing in the url\n\t\t\t\t\tthis.show({[id]:value});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tgetParam(id:string, parent:boolean):any{\n\t\tconst value = this._data[id];\n\t\tif (typeof value !== \"undefined\" || !parent){\n\t\t\treturn value;\n\t\t}\n\n\t\tconst view = this.getParentView();\n\t\tif (view){\n\t\t\treturn view.getParam(id, parent);\n\t\t}\n\t}\n\tgetUrl():IJetURL{\n\t\treturn this._url;\n\t}\n\trender(\n\t\troot?: string | HTMLElement | webix.ui.baseview,\n\t\turl?: IJetURL, parent?: IJetView): Promise<webix.ui.baseview> {\n\n\t\tthis._parent = parent;\n\t\tif (url) {\n\t\t\tthis._index = url[0].index;\n\t\t}\n\t\tthis._init_url_data(url);\n\n\t\troot = root || document.body;\n\t\tconst _container = (typeof root === \"string\") ? webix.toNode(root) : root;\n\n\t\tif (this._container !== _container) {\n\t\t\tthis._container = _container;\n\t\t\treturn this._render(url).then(() => this.getRoot());\n\t\t} else {\n\n\t\t\treturn this._urlChange(url).then(() => this.getRoot());\n\t\t}\n\t}\n\n\tgetIndex():number{\n\t\treturn this._index;\n\t}\n\tgetId():number{\n\t\treturn this._id;\n\t}\n\tgetParentView() : IJetView{\n\t\treturn this._parent;\n\t}\n\n\t$$(id:string | webix.ui.baseview):webix.ui.baseview{\n\t\tif (typeof id === \"string\"){\n\t\t\tconst root = this.getRoot() as any;\n\t\t\treturn root.queryView(\n\t\t\t\t(obj => (obj.config.id === id || obj.config.localId === id) &&\n\t\t\t\t\t\t(obj.$scope === root.$scope)\n\t\t\t\t),\n\t\t\t\t\"self\");\n\t\t} else {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\ton(obj, name, code){\n\t\tconst id = obj.attachEvent(name, code);\n\t\tthis._events.push({ obj, id });\n\t\treturn id;\n\t}\n\n\tcontains(view: IJetView){\n\t\tfor (const key in this._subs){\n\t\t\tconst kid = this._subs[key].view;\n\t\t\tif (kid === view || kid.contains(view)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetSubView(name?:string):IJetView{\n\t\tconst sub = this.getSubViewInfo(name);\n\t\tif (sub){\n\t\t\treturn sub.subview.view;\n\t\t}\n\t}\n\n\tgetSubViewInfo(name?:string):ISubViewInfo{\n\t\tconst sub = this._subs[name || \"default\"];\n\t\tif (sub){\n\t\t\treturn { subview:sub, parent:this };\n\t\t}\n\n\t\t// when called from a child view, searches for nearest parent with subview\n\t\tif (this._parent){\n\t\t\treturn this._parent.getSubViewInfo(name);\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetName():string{\n\t\treturn this._name;\n\t}\n\n\tpublic abstract refresh();\n\tpublic abstract show(path:any, config?:any);\n\tprotected abstract _render(url: IJetURL) : Promise<any>;\n\tprotected abstract _urlChange(url: IJetURL) : Promise<any>;\n\tprotected _init_url_data(url:IJetURL){\n\t\tif (url && url[0]){\n\t\t\tthis._data = {};\n\t\t\twebix.extend(this._data, url[0].params, true);\n\t\t}\n\t\tthis._url = url;\n\t}\n}\n","import {IJetURLChunk} from \"./interfaces\";\n\nexport function diff(oUrl, nUrl){\n\tlet i = 0;\n\tfor (i; i<nUrl.length; i++){\n\t\tconst left = oUrl[i];\n\t\tconst right = nUrl[i];\n\n\t\tif (!left){\n\t\t\tbreak;\n\t\t}\n\t\tif (left.page !== right.page){\n\t\t\tbreak;\n\t\t}\n\n\t\tfor (const key in left.params){\n\t\t\tif (left.params[key] !== right.params[key]){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn i;\n}\n\nexport function parse(url:string):IJetURLChunk[]{\n\t// remove starting /\n\tif (url[0] === \"/\"){\n\t\turl = url.substr(1);\n\t}\n\n\t// split url by \"/\"\n\tconst parts = url.split(\"/\");\n\tconst chunks:IJetURLChunk[] = [];\n\n\t// for each page in url\n\tfor (let i = 0; i < parts.length; i++){\n\t\tconst test = parts[i];\n\t\tconst result = {};\n\n\t\t// detect params\n\t\t// support old \t\t\tsome:a=b:c=d\n\t\t// and new notation\t\tsome?a=b&c=d\n\t\tlet pos = test.indexOf(\":\");\n\t\tif (pos === -1){\n\t\t\tpos = test.indexOf(\"?\");\n\t\t}\n\n\t\tif (pos !== -1){\n\t\t\tconst params = test.substr(pos+1).split(/[\\:\\?\\&]/g);\n\t\t\t// create hash of named params\n\t\t\tfor (const param of params) {\n\t\t\t\tconst dchunk = param.split(\"=\");\n\t\t\t\tresult[dchunk[0]] = decodeURIComponent(dchunk[1]);\n\t\t\t}\n\t\t}\n\n\t\t// store parsed values\n\t\tchunks[i] = {\n\t\t\tpage: (pos > -1 ? test.substr(0, pos) : test),\n\t\t\tparams:result, index:i+1\n\t\t};\n\t}\n\n\t// return array of page objects\n\treturn chunks;\n}\n\nexport function url2str(stack:IJetURLChunk[]):string{\n\tconst url = [];\n\n\tfor (const chunk of stack){\n\t\turl.push(\"/\"+chunk.page);\n\t\tconst params = obj2str(chunk.params);\n\t\tif (params){\n\t\t\turl.push(\"?\"+params);\n\t\t}\n\t}\n\n\treturn url.join(\"\");\n}\n\nfunction obj2str(obj){\n\tconst str = [];\n\tfor (const key in obj){\n\t\tif (str.length){\n\t\t\tstr.push(\"&\");\n\t\t}\n\t\tstr.push(key+\"=\"+encodeURIComponent(obj[key]));\n\t}\n\n\treturn str.join(\"\");\n}","import {JetBase} from \"./JetBase\";\n\nimport {parse, url2str} from \"./helpers\";\nimport {\n\tIJetApp, IJetURL,\n\tIJetView, IJetViewFactory, ISubView, IUIConfig} from \"./interfaces\";\n\ninterface IDestructable{\n\tdestructor():void;\n}\n\nexport class JetView extends JetBase{\n\tprivate _children:IDestructable[];\n\tprivate _parentFrame:ISubView;\n\n\tconstructor(app : IJetApp, name : string){\n\t\tsuper();\n\n\t\tthis.app = app;\n\n\t\tthis._name = name;\n\t\tthis._children = [];\n\t}\n\n\tui(\n\t\tui:webix.ui.viewConfig|IJetViewFactory,\n\t\tconfig?: IUIConfig\n\t) : webix.ui.baseview | IJetView{\n\t\tconfig = config || {};\n\t\tconst container = config.container || (ui as webix.ui.viewConfig).container;\n\n\t\tconst jetview = this.app.createView(ui);\n\t\tthis._children.push(jetview);\n\n\t\tjetview.render(container, null, this);\n\n\t\tif (typeof ui !== \"object\" || (ui instanceof JetBase)){\n\t\t\t// raw webix UI\n\t\t\treturn jetview;\n\t\t} else {\n\t\t\treturn jetview.getRoot();\n\t\t}\n\t}\n\n\tshow(path:any, config?:any):Promise<any>{\n\t\tconfig = config || {};\n\n\t\t// detect the related view\n\t\tif (typeof path === \"string\"){\n\t\t\t// root path\n\t\t\tif (path.substr(0,1) === \"/\"){\n\t\t\t\treturn this.app.show(path);\n\t\t\t}\n\t\t\t// parent path, call parent view\n\t\t\tif (path.indexOf(\"../\") === 0){\n\t\t\t\tconst parent = this.getParentView();\n\t\t\t\tif (parent){\n\t\t\t\t\tparent.show(\"./\"+path.substr(3), config);\n\t\t\t\t} else {\n\t\t\t\t\tthis.app.show(\"/\"+path.substr(3));\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// local path, do nothing\n\t\t\tif (path.indexOf(\"./\") === 0){\n\t\t\t\tpath = path.substr(2);\n\t\t\t}\n\n\t\t\tconst sub = this.getSubViewInfo(config.target);\n\t\t\tif (!sub){\n\t\t\t\treturn this.app.show(\"/\"+path);\n\t\t\t}\n\t\t\tif (sub.parent !== this){\n\t\t\t\treturn sub.parent.show(path, config);\n\t\t\t}\n\t\t}\n\n\t\tconst currentUrl = parse(this.app.getRouter().get());\n\n\t\t// convert parameters to url\n\t\tif (typeof path === \"object\"){\n\t\t\tif (webix.isArray(path)){\n\t\t\t\tconst argIndex = this._index+path[0];\n\t\t\t\tif (!currentUrl[argIndex]){\n\t\t\t\t\tcurrentUrl[argIndex] = {} as any;\n\t\t\t\t}\n\t\t\t\tcurrentUrl[argIndex].page=path[1];\n\t\t\t\tpath = \"\";\n\t\t\t} else {\n\t\t\t\tconst temp = [];\n\t\t\t\tfor (const key in path){\n\t\t\t\t\ttemp.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(path[key]));\n\t\t\t\t}\n\t\t\t\tpath = \"?\"+temp.join(\"&\");\n\t\t\t}\n\t\t}\n\n\t\t// process url\n\t\tif (typeof path === \"string\"){\n\t\t\t// parameters only\n\t\t\tif (path.substr(0, 1) === \"?\") {\n\t\t\t\tconst next = path.indexOf(\"/\");\n\t\t\t\tlet params = path;\n\t\t\t\tif (next > -1){\n\t\t\t\t\tparams = path.substr(0, next);\n\t\t\t\t}\n\t\t\t\tconst chunk = parse(params);\n\t\t\t\twebix.extend(currentUrl[this._index-1].params, chunk[0].params, true);\n\t\t\t\tpath = next > -1 ? path.substr(next+1) : \"\";\n\t\t\t}\n\n\t\t\tconst newChunk = path === \"\" ? currentUrl.slice(this._index) : parse(path);\n\t\t\tlet url: IJetURL = null;\n\t\t\tif (this._index){\n\t\t\t\turl = currentUrl.slice(0, this._index).concat(newChunk);\n\t\t\t\tfor\t(let i=0; i<url.length; i++){\n\t\t\t\t\turl[i].index = i+1;\n\t\t\t\t}\n\n\t\t\t\tconst urlstr = url2str(url);\n\n\t\t\t\treturn this.app.canNavigate(urlstr, this).then(redirect => {\n\t\t\t\t\tif (redirect !== null){\n\t\t\t\t\t\tif (urlstr !== redirect){\n\t\t\t\t\t\t\t// url was blocked and redirected\n\t\t\t\t\t\t\treturn this.app.show(redirect);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn this._finishShow(url, redirect);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this._finishShow(newChunk, \"\");\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(_$view:webix.ui.baseview, _$url: IJetURL){\n\t\t// stub\n\t}\n\tready(_$view:webix.ui.baseview, _$url: IJetURL){\n\t\t// stub\n\t}\n\tconfig() : any {\n\t\tthis.app.webix.message(\"View:Config is not implemented\");\n\t}\n\turlChange(_$view: webix.ui.baseview, _$url : IJetURL){\n\t\t// stub\n\t}\n\n\tdestroy(){\n\t\t// stub\n\t}\n\n\tdestructor(){\n\t\tthis.destroy();\n\t\tthis._destroyKids();\n\n\t\t// reset vars for better GC processing\n\t\tthis.app = this._parentFrame = null;\n\n\t\t// destroy actual UI\n\t\tthis._root.destructor();\n\t\tsuper.destructor();\n\t}\n\n\tuse(plugin, config){\n\t\tplugin(this.app, this, config);\n\t}\n\n\trefresh(){\n\t\tthis._destroyKids();\n\t\tlet url = [];\n\t\tif (this._index > 1)\n\t\t\turl = parse(this.app.getRouter().get()).slice(this._index-1);\n\t\tthis._render(url).then(() => {\n\t\t\tthis._parentFrame.id = this.getRoot().config.id as string;\n\t\t});\n\t}\n\n\tprotected _render(url:IJetURL):Promise<any>{\n\t\tconst config = this.config();\n\t\tif (config.then){\n\t\t\treturn config.then(cfg => this._render_final(cfg, url));\n\t\t} else {\n\t\t\treturn this._render_final(config, url);\n\t\t}\n\t}\n\n\tprotected _render_final(config:any, url:IJetURL):Promise<any>{\n\t\tconst prev = this._container as webix.ui.baseview;\n\t\tif (prev && (prev as any).$destructed){\n\t\t\treturn Promise.reject(\"Container destroyed\");\n\t\t}\n\n\t\tlet response:Promise<any>;\n\n\t\t// using wrapper object, so ui can be changed from app:render event\n\t\tconst result:any = { ui: {} };\n\t\tthis.app.copyConfig(config, result.ui, this._subs);\n\t\tthis.app.callEvent(\"app:render\", [this, url, result]);\n\t\tresult.ui.$scope = this;\n\n\t\ttry {\n\t\t\t// special handling for adding inside of multiview - preserve old id\n\t\t\tif (prev && prev.getParentView){\n\t\t\t\tconst parent = prev.getParentView();\n\t\t\t\tif (parent && parent.name === \"multiview\" && !result.ui.id){\n\t\t\t\t\tresult.ui.id = prev.config.id;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._root = this.app.webix.ui(result.ui, this._container);\n\t\t\tif (this._root.getParentView()){\n\t\t\t\tthis._container = this._root;\n\t\t\t}\n\n\t\t\tthis._init(this._root, url);\n\t\t\tresponse = this._urlChange(url).then(() => {\n\t\t\t\treturn this.ready(this._root, url);\n\t\t\t});\n\t\t} catch(e){\n\t\t\tresponse = Promise.reject(e);\n\t\t}\n\n\t\treturn response.catch(err => this._initError(this, err));\n\t}\n\n\tprotected _init(view:webix.ui.baseview, url: IJetURL){\n\t\treturn this.init(view, url);\n\t}\n\n\tprotected _urlChange(url:IJetURL):Promise<any>{\n\t\tthis.app.callEvent(\"app:urlchange\", [this, url, this._index]);\n\n\t\tconst waits = [];\n\t\tfor (const key in this._subs){\n\t\t\tconst wait = this._renderFrame(key, this._subs[key], url);\n\t\t\tif (wait){\n\t\t\t\twaits.push(wait);\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(waits).then(() => {\n\t\t\tthis.urlChange(this._root, url);\n\t\t});\n\t}\n\n\tprotected _renderFrame(key:string, frame:ISubView, url:IJetURL):Promise<any>{\n\t\tif (frame.url){\n\t\t\t// we have fixed subview url\n\t\t\tif (typeof frame.url === \"string\"){\n\t\t\t\tconst parsed = parse(frame.url);\n\t\t\t\tparsed.map(a => { a.index = 0; });\n\t\t\t\treturn this._createSubView(frame, parsed);\n\t\t\t} else {\n\t\t\t\tlet view = frame.view;\n\t\t\t\tif (typeof frame.url === \"function\" && !(view instanceof frame.url)){\n\t\t\t\t\tview = new frame.url(this.app, \"\");\n\t\t\t\t}\n\t\t\t\tif (!view){\n\t\t\t\t\tview = frame.url as any;\n\t\t\t\t}\n\t\t\t\treturn this._renderSubView(frame, view, url);\n\t\t\t}\n\t\t} else if (key === \"default\" && url && url.length > 1){\n\t\t\t// we have an url and subview for it\n\t\t\tconst suburl = url.slice(1);\n\t\t\treturn this._createSubView(frame, suburl);\n\t\t}\n\t}\n\n\tprivate _initError(view: any, err: any){\n\t\tthis.app.error(\"app:error:initview\", [err, view]);\n\t\treturn true;\n\t}\n\n\tprivate _createSubView(\n\t\t\t\t\tsub:ISubView,\n\t\t\t\t\tsuburl:IJetURL):Promise<webix.ui.baseview>{\n\t\treturn this.app.createFromURL(suburl, sub.view).then(view => {\n\t\t\treturn this._renderSubView(sub, view, suburl);\n\t\t});\n\t}\n\n\tprivate _renderSubView(\n\t\t\t\t\tsub:ISubView,\n\t\t\t\t\tview:IJetView,\n\t\t\t\t\tsuburl:IJetURL):Promise<webix.ui.baseview>{\n\t\tconst cell = this.app.webix.$$(sub.id);\n\t\treturn view.render(cell, suburl, this).then(ui => {\n\t\t\t// destroy old view\n\t\t\tif (sub.view && sub.view !== view){\n\t\t\t\tsub.view.destructor();\n\t\t\t}\n\n\t\t\t// save info about a new view\n\t\t\tsub.view = view;\n\t\t\tsub.id = ui.config.id as string;\n\n\t\t\tif (view instanceof JetView){\n\t\t\t\tview._parentFrame = sub;\n\t\t\t}\n\n\t\t\treturn ui;\n\t\t});\n\t}\n\n\tprivate _finishShow(url:IJetURL, path:string) : Promise<any>{\n\t\tlet next;\n\t\tif (this._index){\n\t\t\tnext = this._renderPartial(url.slice(this._index-1));\n\t\t\tthis.app.getRouter().set(path, { silent: true });\n\t\t\tthis.app.callEvent(\"app:route\", [url]);\n\t\t} else {\n\t\t\turl.map(a => a.index = 0);\n\t\t\tnext = this._renderPartial([null, ...url]);\n\t\t}\n\t\treturn next;\n\t}\n\n\tprivate _renderPartial(url:IJetURL){\n\t\tthis._init_url_data(url);\n\t\treturn this._urlChange(url);\n\t}\n\n\tprivate _destroyKids(){\n\t\t// destroy child views\n\t\tconst uis = this._children;\n\t\tfor (let i = uis.length - 1; i >= 0; i--){\n\t\t\tif (uis[i] && uis[i].destructor){\n\t\t\t\tuis[i].destructor();\n\t\t\t}\n\t\t}\n\n\t\t// reset vars for better GC processing\n\t\tthis._children = [];\n\t}\n}\n","import {IJetApp,IJetURL} from \"./interfaces\";\nimport {JetView} from \"./JetView\";\n\n\n// wrapper for raw objects and Jet 1.x structs\nexport class JetViewLegacy extends JetView{\n\tprivate _ui:any;\n\tprivate _windows: JetView[];\n\n\tconstructor(app:IJetApp, name:string, ui: any){\n\t\tsuper(app, name);\n\t\tthis._ui = ui;\n\t\tthis._windows = [];\n\t}\n\n\tgetRoot(){\n\t\tif (this.app.config.jet1xMode){\n\t\t\tconst parent = this.getParentView();\n\t\t\tif (parent){\n\t\t\t\treturn parent.getRoot();\n\t\t\t}\n\t\t}\n\n\t\treturn this._root;\n\t}\n\n\tconfig(){\n\t\treturn this._ui.$ui || this._ui;\n\t}\n\tdestructor(){\n\t\tconst destroy = this._ui.$ondestroy;\n\t\tif (destroy){\n\t\t\tdestroy();\n\t\t}\n\n\t\tfor (const window of this._windows){\n\t\t\twindow.destructor();\n\t\t}\n\n\t\tsuper.destructor();\n\t}\n\tshow(path:string, config:any){\n\t\tif (path.indexOf(\"/\") === 0 || path.indexOf(\"./\") === 0){\n\t\t\treturn super.show(path, config);\n\t\t}\n\t\tsuper.show(\"../\"+path, config);\n\t}\n\tinit(){\n\t\tif ((this.app.config as any).legacyEarlyInit){\n\t\t\tthis._realInitHandler();\n\t\t}\n\t}\n\tready(){\n\t\tif (!(this.app.config as any).legacyEarlyInit){\n\t\t\tthis._realInitHandler();\n\t\t}\n\t}\n\tprotected _realInitHandler(){\n\t\tconst init = this._ui.$oninit;\n\t\tif (init){\n\t\t\tconst root = this.getRoot();\n\t\t\tinit(root, (root as any).$scope);\n\t\t}\n\n\t\tconst events = this._ui.$onevent;\n\t\tif (events){\n\t\t\tfor (const key in events){\n\t\t\t\tthis.on(this.app, key, events[key]);\n\t\t\t}\n\t\t}\n\n\t\tconst windows = this._ui.$windows;\n\t\tif (windows){\n\t\t\tfor (const conf of windows){\n\t\t\t\tif (conf.$ui){\n\t\t\t\t\tconst view = new JetViewLegacy(this.app, this.getName(), conf);\n\t\t\t\t\tview.render(document.body);\n\t\t\t\t\tthis._windows.push(view);\n\t\t\t\t} else {\n\t\t\t\t\tthis.ui(conf);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _urlChange(url : IJetURL):Promise<any>{\n\t\treturn super._urlChange(url).then(() => {\n\t\t\tconst onurlchange = this._ui.$onurlchange;\n\t\t\tif (onurlchange){\n\t\t\t\tconst root = this.getRoot();\n\t\t\t\tonurlchange(url[0].params, url.slice(1), (root as any).$scope);\n\t\t\t}\n\t\t});\n\t}\n}","import {IJetApp} from \"./interfaces\";\nimport {JetView} from \"./JetView\";\n\n\n// wrapper for raw objects and Jet 1.x structs\nexport class JetViewRaw extends JetView{\n\tprivate _ui:any;\n\n\tconstructor(app:IJetApp, name:string, ui: any){\n\t\tsuper(app, name);\n\t\tthis._ui = ui;\n\t}\n\n\tconfig(){\n\t\treturn this._ui;\n\t}\n}","/*!\r\n * webix-routie - router for Webix-Jet\r\n * v0.4.0\r\n * MIT License\r\n *\r\n * based on routie - a tiny hash router\r\n * http://projects.jga.me/routie\r\n * copyright Greg Allen 2016\r\n * MIT License\r\n*/\r\n\r\nvar Routie = function(w, isModule) {\r\n\r\n  var routes = [];\r\n  var map = {};\r\n  var reference = 'routie';\r\n  var oldReference = w[reference];\r\n  var oldUrl;\r\n\r\n  var Route = function(path, name) {\r\n    this.name = name;\r\n    this.path = path;\r\n    this.keys = [];\r\n    this.fns = [];\r\n    this.params = {};\r\n    this.regex = pathToRegexp(this.path, this.keys, false, false);\r\n\r\n  };\r\n\r\n  Route.prototype.addHandler = function(fn) {\r\n    this.fns.push(fn);\r\n  };\r\n\r\n  Route.prototype.removeHandler = function(fn) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      var f = this.fns[i];\r\n      if (fn == f) {\r\n        this.fns.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  Route.prototype.run = function(params) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      if (this.fns[i].apply(this, params) === false)\r\n        return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  Route.prototype.match = function(path, params){\r\n    var m = this.regex.exec(path);\r\n\r\n    if (!m) return false;\r\n\r\n\r\n    for (var i = 1, len = m.length; i < len; ++i) {\r\n      var key = this.keys[i - 1];\r\n\r\n      var val = ('string' == typeof m[i]) ? decodeURIComponent(m[i]) : m[i];\r\n\r\n      if (key) {\r\n        this.params[key.name] = val;\r\n      }\r\n      params.push(val);\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  Route.prototype.toURL = function(params) {\r\n    var path = this.path;\r\n    for (var param in params) {\r\n      path = path.replace('/:'+param, '/'+params[param]);\r\n    }\r\n    path = path.replace(/\\/:.*\\?/g, '/').replace(/\\?/g, '');\r\n    if (path.indexOf(':') != -1) {\r\n      throw new Error('missing parameters for url: '+path);\r\n    }\r\n    return path;\r\n  };\r\n\r\n  var pathToRegexp = function(path, keys, sensitive, strict) {\r\n    if (path instanceof RegExp) return path;\r\n    if (path instanceof Array) path = '(' + path.join('|') + ')';\r\n    path = path\r\n      .concat(strict ? '' : '/?')\r\n      .replace(/\\/\\(/g, '(?:/')\r\n      .replace(/\\+/g, '__plus__')\r\n      .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, function(_, slash, format, key, capture, optional){\r\n        keys.push({ name: key, optional: !! optional });\r\n        slash = slash || '';\r\n        return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '');\r\n      })\r\n      .replace(/([/.])/g, '\\\\$1')\r\n      .replace(/__plus__/g, '(.+)')\r\n      .replace(/\\*/g, '(.*)');\r\n    return new RegExp('^' + path + '$', sensitive ? '' : 'i');\r\n  };\r\n\r\n  var addHandler = function(path, fn) {\r\n    var s = path.split(' ');\r\n    var name = (s.length == 2) ? s[0] : null;\r\n    path = (s.length == 2) ? s[1] : s[0];\r\n\r\n    if (!map[path]) {\r\n      map[path] = new Route(path, name);\r\n      routes.push(map[path]);\r\n    }\r\n    map[path].addHandler(fn);\r\n  };\r\n\r\n  var routie = function(path, fn) {\r\n    if (typeof fn == 'function') {\r\n      addHandler(path, fn);\r\n      routie.reload();\r\n    } else if (typeof path == 'object') {\r\n      for (var p in path) {\r\n        addHandler(p, path[p]);\r\n      }\r\n      routie.reload();\r\n    } else if (typeof fn === 'undefined') {\r\n      routie.navigate(path);\r\n    }\r\n  };\r\n\r\n  routie.lookup = function(name, obj) {\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      if (route.name == name) {\r\n        return route.toURL(obj);\r\n      }\r\n    }\r\n  };\r\n\r\n  routie.remove = function(path, fn) {\r\n    var route = map[path];\r\n    if (!route)\r\n      return;\r\n    route.removeHandler(fn);\r\n  };\r\n\r\n  routie.removeAll = function() {\r\n    map = {};\r\n    routes = [];\r\n    oldUrl = '';\r\n  };\r\n\r\n  routie.navigate = function(path, options) {\r\n    options = options || {};\r\n    var silent = options.silent || false;\r\n\r\n    if (silent) {\r\n      removeListener();\r\n    }\r\n    setTimeout(function() {\r\n      window.location.hash = path;\r\n\r\n      if (silent) {\r\n        setTimeout(function() { \r\n          addListener();\r\n        }, 1);\r\n      }\r\n\r\n    }, 1);\r\n  };\r\n\r\n  routie.noConflict = function() {\r\n    w[reference] = oldReference;\r\n    return routie;\r\n  };\r\n\r\n  var getHash = function() {\r\n    return window.location.hash.substring(1);\r\n  };\r\n\r\n  var checkRoute = function(hash, route) {\r\n    var params = [];\r\n    if (route.match(hash, params)) {\r\n      return (route.run(params) !== false ? 1 : 0);\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  var hashChanged = routie.reload = function() {\r\n    var hash = getHash();\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      var state = checkRoute(hash, route);\r\n      if (state === 1) {\r\n        //route processed\r\n        oldUrl = hash;\r\n        break;\r\n      } else if (state === 0){\r\n        //route rejected\r\n        routie.navigate(oldUrl, { silent:true });\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  var addListener = function() {\r\n    if (w.addEventListener) {\r\n      w.addEventListener('hashchange', hashChanged, false);\r\n    } else {\r\n      w.attachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n\r\n  var removeListener = function() {\r\n    if (w.removeEventListener) {\r\n      w.removeEventListener('hashchange', hashChanged);\r\n    } else {\r\n      w.detachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n  addListener();\r\n  oldUrl = getHash();\r\n\r\n  if (isModule){\r\n    return routie;\r\n  } else {\r\n    w[reference] = routie;\r\n  }\r\n   \r\n};\r\n\r\nif (typeof module == 'undefined'){\r\n  Routie(window);\r\n} else {\r\n  module.exports = Routie(window,true);\r\n  module.exports.default = module.exports;\r\n}","import routie from \"webix-routie/lib/routie\";\n\nimport {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\n\n\nexport class HashRouter implements IJetRouter{\n\tprivate config:any;\n\tprivate _lastUrl:string;\n\tprivate _prefix:string;\n\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.config = config || {};\n\t\tthis._prefix = this.config.routerPrefix;\n\n\t\t// use \"#!\" for backward compatibility\n\t\tif (typeof this._prefix === \"undefined\"){\n\t\t\tthis._prefix = \"!\";\n\t\t}\n\n\t\tlet rcb = function(_$a){ /* stub */ };\n\t\troutie(this._prefix+\"*\", () => {\n\t\t\tthis._lastUrl = \"\";\n\t\t\treturn rcb(this.get());\n\t\t});\n\t\trcb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tif (this.config.routes){\n\t\t\tconst compare = path.split(\"?\",2);\n\t\t\tfor (const key in this.config.routes){\n\t\t\t\tif (this.config.routes[key] === compare[0]){\n\t\t\t\t\tpath = key+(compare.length > 1 ? \"?\"+compare[1] : \"\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._lastUrl = path;\n\t\t(routie as any).navigate(this._prefix+path, config);\n\t}\n\tget(){\n\t\tlet path =  this._lastUrl ||\n\t\t\t\t\t(window.location.hash || \"\").replace(\"#\"+this._prefix,\"\");\n\n\t\tif (this.config.routes){\n\t\t\tconst compare = path.split(\"?\",2);\n\t\t\tconst key = this.config.routes[compare[0]];\n\t\t\tif (key){\n\t\t\t\tpath = key+(compare.length > 1 ? \"?\"+compare[1] : \"\");\n\t\t\t}\n\t\t}\n\t\treturn path;\n\t}\n}","const w = webix as any;\nconst version = webix.version.split(\".\") as any[];\n\n// will be fixed in webix 5.3\nif (version[0]*10+version[1]*1 < 53) {\n\tw.ui.freeze = function(handler):any{\n\t\t// disabled because webix jet 5.0 can't handle resize of scrollview correctly\n\t\t// w.ui.$freeze = true;\n\t\tconst res = handler();\n\t\tif (res && res.then){\n\t\t\tres.then(function(some){\n\t\t\t\tw.ui.$freeze = false;\n\t\t\t\tw.ui.resize();\n\t\t\t\treturn some;\n\t\t\t});\n\t\t} else {\n\t\t\tw.ui.$freeze = false;\n\t\t\tw.ui.resize();\n\t\t}\n\t\treturn res;\n\t};\n}\n\n// adding views as classes\nconst baseAdd = w.ui.baselayout.prototype.addView as any;\nconst baseRemove = w.ui.baselayout.prototype.removeView as any;\n\nconst config = {\n\taddView(view, index){\n\t\tif (this.$scope && this.$scope.webixJet){\n\t\t\tconst jview = this.$scope;\n\t\t\tconst subs = {};\n\n\t\t\tview = jview.app.copyConfig(view, {}, subs);\n\t\t\tbaseAdd.apply(this, [view, index]);\n\n\t\t\tfor (const key in subs){\n\t\t\t\tjview._renderFrame(key, subs[key], jview.getUrl()).then(() => {\n\t\t\t\t\tjview._subs[key] = subs[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn view.id;\n\t\t} else {\n\t\t\treturn baseAdd.apply(this, arguments);\n\t\t}\n\t},\n\tremoveView(){\n\t\tbaseRemove.apply(this, arguments);\n\t\tif (this.$scope && this.$scope.webixJet){\n\t\t\tconst subs = this.$scope._subs;\n\t\t\tfor(const key in subs){\n\t\t\t\tif (!webix.$$(subs[key].id)){\n\t\t\t\t\tdelete subs[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nw.extend(w.ui.layout.prototype, config, true);\nw.extend(w.ui.baselayout.prototype, config, true);\n\n// wrapper for using Jet Apps as views\n\nwebix.protoUI({\n\tname:\"jetapp\",\n\t$init(cfg){\n\t\tthis.$app = new this.app(cfg);\n\n\t\tconst id = webix.uid().toString();\n\t\tcfg.body = { id };\n\n\t\tthis.$ready.push(function(){\n\t\t\tthis.$app.render(webix.$$(id));\n\t\t});\n\t}\n}, (webix.ui as any).proxy);\n\ndeclare namespace webix {\n\tnamespace ui { \n\t\tclass jetapp extends webix.ui.view{\n\t\t}\n\t}\n}","import { JetBase } from \"./JetBase\";\nimport { JetViewLegacy } from \"./JetViewLegacy\";\nimport { JetViewRaw } from \"./JetViewRaw\";\n\nimport {\n\tIJetApp, IJetConfig, IJetRouter,\n\tIJetURL, IJetURLChunk,\n\tIJetView, ISubView, IViewConfig, IWebixFacade } from \"./interfaces\";\n\nimport { HashRouter } from \"./routers/HashRouter\";\n\nimport { parse, url2str } from \"./helpers\";\nimport \"./patch\";\n\n// webpack require\ndeclare function require(_$url: string): any;\n\n\nexport class JetApp extends JetBase implements IJetApp {\n\tpublic config: IJetConfig;\n\tpublic webix: IWebixFacade;\n\n\tcallEvent: (name: string, parameters: any[]) => boolean;\n\tattachEvent: (name: string, handler: any) => void;\n\n\tprivate $router: IJetRouter;\n\tprivate _view: IJetView;\n\tprivate _services: { [name: string]: any };\n\n\tconstructor(config: any) {\n\t\tsuper();\n\t\tthis.webix = config.webix || webix;\n\n\t\t// init config\n\t\tthis.config = this.webix.extend({\n\t\t\tname: \"App\",\n\t\t\tversion: \"1.0\",\n\t\t\tstart: \"/home\"\n\t\t}, config, true);\n\n\t\tthis._name = this.config.name;\n\t\tthis._services = {};\n\n\t\twebix.extend(this, webix.EventSystem);\n\t}\n\n\tgetService(name: string) {\n\t\tlet obj = this._services[name];\n\t\tif (typeof obj === \"function\") {\n\t\t\tobj = this._services[name] = obj(this);\n\t\t}\n\t\treturn obj;\n\t}\n\tsetService(name: string, handler: any) {\n\t\tthis._services[name] = handler;\n\t}\n\t// copy object and collect extra handlers\n\tcopyConfig(obj: any, target: any, config: IViewConfig) {\n\t\t// raw ui config\n\t\tif (obj.$ui) {\n\t\t\tobj = { $subview: new JetViewLegacy(this, \"\", obj) };\n\t\t} else if (obj instanceof JetBase ||\n\t\t\t\t\t(typeof obj === \"function\" && obj.prototype instanceof JetBase)){\n\t\t\tobj = { $subview: obj };\n\t\t}\n\n\t\t// subview placeholder\n\t\tif (obj.$subview) {\n\t\t\treturn this.addSubView(obj, target, config);\n\t\t}\n\n\t\t// process sub-properties\n\t\ttarget = target || (obj instanceof Array ? [] : {});\n\t\tfor (const method in obj) {\n\t\t\tlet point = obj[method];\n\n\t\t\t// view class\n\t\t\tif (typeof point === \"function\" && point.prototype instanceof JetBase) {\n\t\t\t\tpoint = { $subview : point };\n\t\t\t}\n\n\t\t\tif (point && typeof point === \"object\" &&\n\t\t\t\t!(point instanceof webix.DataCollection) && !(point instanceof RegExp)) {\n\t\t\t\tif (point instanceof Date) {\n\t\t\t\t\ttarget[method] = new Date(point);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[method] = this.copyConfig(\n\t\t\t\t\t\tpoint,\n\t\t\t\t\t\t(point instanceof Array ? [] : {}),\n\t\t\t\t\t\tconfig);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttarget[method] = point;\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tgetRouter() {\n\t\treturn this.$router;\n\t}\n\n\tclickHandler(e: Event) {\n\t\tif (e) {\n\t\t\tconst target: HTMLElement = (e.target || e.srcElement) as HTMLElement;\n\t\t\tif (target && target.getAttribute) {\n\t\t\t\tconst trigger: string = target.getAttribute(\"trigger\");\n\t\t\t\tif (trigger) {\n\t\t\t\t\tthis.trigger(trigger);\n\t\t\t\t}\n\t\t\t\tconst route: string = target.getAttribute(\"route\");\n\t\t\t\tif (route) {\n\t\t\t\t\tthis.show(route);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trefresh(){\n\t\tconst temp = this._container;\n\t\t//enforce view recreation\n\t\tthis._view._name = webix.uid()+\"\";\n\t\tthis._container = null;\n\t\tthis.render(temp, parse(this.getRouter().get()), this._parent);\n\t}\n\n\tloadView(url): Promise<any> {\n\t\tconst views = this.config.views;\n\t\tlet result = null;\n\n\t\tif (url === \"\"){\n\t\t\treturn Promise.resolve(\n\t\t\t\tthis._loadError(\"\", new Error(\"Webix Jet: Empty url segment\"))\n\t\t\t);\n\t\t}\n\n\t\ttry {\n\t\t\tif (views) {\n\t\t\t\tif (typeof views === \"function\") {\n\t\t\t\t\t// custom loading strategy\n\t\t\t\t\tresult = views(url);\n\t\t\t\t} else {\n\t\t\t\t\t// predefined hash\n\t\t\t\t\tresult = views[url];\n\t\t\t\t}\n\t\t\t\tif (typeof result === \"string\"){\n\t\t\t\t\turl = result;\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!result){\n\t\t\t\turl = url.replace(/\\./g, \"/\");\n\t\t\t\tresult = require(\"jet-views/\"+url);\n\t\t\t}\n\t\t} catch(e){\n\t\t\tresult = this._loadError(url, e);\n\t\t}\n\n\t\t// custom handler can return view or its promise\n\t\tif (!result.then){\n\t\t\tresult = Promise.resolve(result);\n\t\t}\n\n\t\t// set error handler\n\t\tresult = result\n\t\t\t.then(module => module.__esModule ? module.default : module)\n\t\t\t.catch(err => this._loadError(url, err));\n\n\t\treturn result;\n\t}\n\n\tcreateFromURL(url: IJetURLChunk[], now?: IJetView): Promise<IJetView> {\n\t\tconst chunk = url[0];\n\t\tconst name = chunk.page;\n\n\t\tlet view;\n\t\tif (now && now.getName() === name) {\n\t\t\tview = Promise.resolve(now);\n\t\t} else {\n\t\t\tview = this.loadView(chunk.page)\n\t\t\t\t.then(ui => this.createView(ui, name));\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tcreateView(ui:any, name?:string){\n\t\tlet obj;\n\t\tif (typeof ui === \"function\") {\n\t\t\tif (ui.prototype instanceof JetBase) {\n\t\t\t\t// UI class\n\t\t\t\treturn new ui(this, name);\n\t\t\t} else {\n\t\t\t\t// UI factory functions\n\t\t\t\tui = ui();\n\t\t\t}\n\t\t}\n\n\t\tif (ui instanceof JetBase){\n\t\t\tobj = ui;\n\t\t} else {\n\t\t\t// UI object\n\t\t\tif (ui.$ui) {\n\t\t\t\tobj = new JetViewLegacy(this, name, ui);\n\t\t\t} else {\n\t\t\t\tobj = new JetViewRaw(this, name, ui);\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// show view path\n\tshow(name: string) : Promise<any> {\n\t\tif (this.$router.get() !== name) {\n\t\t\treturn this._render(name);\n\t\t} else {\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\t}\n\n\tcanNavigate(url: string, view?:IJetView):Promise<string>{\n\t\tconst obj = {\n\t\t\turl:parse(url),\n\t\t\tredirect:url,\n\t\t\tconfirm: Promise.resolve(true)\n\t\t};\n\n\t\tconst res = this.callEvent(\"app:guard\", [url, (view || this._view), obj]);\n\t\tif (!res){\n\t\t\treturn Promise.reject(\"\");\n\t\t}\n\n\t\treturn obj.confirm.catch(() => obj.redirect = null).then(() => obj.redirect);\n\t}\n\n\tdestructor() {\n\t\tthis._view.destructor();\n\t}\n\n\t// event helpers\n\ttrigger(name: string, ...rest: any[]) {\n\t\tthis.apply(name, rest);\n\t}\n\tapply(name: string, data: any[]) {\n\t\tthis.callEvent(name, data);\n\t}\n\taction(name: string) {\n\t\treturn this.webix.bind(function(...rest: any[]) {\n\t\t\tthis.apply(name, rest);\n\t\t}, this);\n\t}\n\ton(name: string, handler) {\n\t\tthis.attachEvent(name, handler);\n\t}\n\n\tuse(plugin, config){\n\t\tplugin(this, null, config);\n\t}\n\n\terror(name:string, er:any[]){\n\t\tthis.callEvent(name, er);\n\t\tthis.callEvent(\"app:error\", er);\n\n\t\t/* tslint:disable */\n\t\tif (this.config.debug){\n\t\t\tfor (var i=0; i<er.length; i++){\n\t\t\t\tconsole.error(er[i]);\n\t\t\t\tif (er[i] instanceof Error){\n\t\t\t\t\tlet text = er[i].message;\n\t\t\t\t\tif (text.indexOf(\"Module build failed\") === 0){\n\t\t\t\t\t\ttext = text.replace(/\\x1b\\[[0-9;]*m/g,\"\");\n\t\t\t\t\t\tdocument.body.innerHTML = `<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>${text}</pre>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttext += \"<br><br>Check console for more details\";\n\t\t\t\t\t\twebix.message({ type:\"error\", text:text, expire:-1 });\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tdebugger;\n\t\t}\n\t\t/* tslint:enable */\n\t}\n\n\t// renders top view\n\tprotected _render(url: string | IJetURL): Promise<IJetView> {\n\t\tconst firstInit = !this.$router;\n\t\tif (firstInit){\n\t\t\twebix.attachEvent(\"onClick\", e => this.clickHandler(e));\n\t\t\turl = this._first_start(url);\n\t\t}\n\n\t\tconst strUrl = typeof url === \"string\" ? url : url2str(url);\n\n\t\treturn this.canNavigate(strUrl).then(newurl => {\n\t\t\tif (newurl !== null){\n\t\t\t\tthis.$router.set(newurl, { silent:true });\n\t\t\t\treturn this._render_stage(newurl);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tprotected _render_stage(url): Promise<IJetView>{\n\t\tconst parsed = (typeof url === \"string\") ? parse(url) : url;\n\n\t\t// block resizing while rendering parts of UI\n\t\treturn (webix.ui as any).freeze(() =>\n\t\t\tthis.createFromURL(parsed, this._view).then(view => {\n\t\t\t\t// save reference for old and new views\n\t\t\t\tconst oldview = this._view;\n\t\t\t\tthis._view = view;\n\n\t\t\t\t// render url state for the root\n\t\t\t\treturn view.render(this._container, parsed, this._parent).then(root => {\n\t\t\t\t\t// destroy and detach old view\n\t\t\t\t\tif (oldview && oldview !== this._view) {\n\t\t\t\t\t\toldview.destructor();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._view.getRoot().getParentView()){\n\t\t\t\t\t\tthis._container = root;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._root = root;\n\n\t\t\t\t\tthis.callEvent(\"app:route\", [parsed]);\n\t\t\t\t\treturn view;\n\t\t\t\t});\n\t\t\t}).catch(er => {\n\t\t\t\tthis.error(\"app:error:render\", [er]);\n\t\t\t})\n\t\t);\n\t}\n\n\tprotected _urlChange(_$url:IJetURL):Promise<any>{\n\t\talert(\"Not implemented\");\n\t\treturn Promise.resolve(true);\n\t}\n\n\tprivate _first_start(url: string | IJetURL){\n\t\tconst cb = a => setTimeout(() => {\n\t\t\tthis._render(a);\n\t\t},1);\n\t\tthis.$router = new (this.config.router || HashRouter)(cb, this.config);\n\n\t\t// start animation for top-level app\n\t\tif (this._container === document.body && this.config.animation !== false) {\n\t\t\tconst node = this._container as HTMLElement;\n\t\t\twebix.html.addCss(node, \"webixappstart\");\n\t\t\tsetTimeout(() => {\n\t\t\t\twebix.html.removeCss(node, \"webixappstart\");\n\t\t\t\twebix.html.addCss(node, \"webixapp\");\n\t\t\t}, 10);\n\t\t}\n\n\t\tif (!url || url.length === 1){\n\t\t\turl = this.$router.get() || this.config.start;\n\t\t\tthis.$router.set(url, { silent: true });\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// error during view resolving\n\tprivate _loadError(url: string, err: Error):any{\n\t\tthis.error(\"app:error:resolve\", [err, url]);\n\t\treturn { template:\" \" };\n\t}\n\n\tprivate addSubView(obj, target, config:IViewConfig) : ISubView {\n\t\tconst url = obj.$subview !== true ? obj.$subview : null;\n\t\tconst name: string = obj.name || (url ? this.webix.uid() : \"default\");\n\t\ttarget.id = obj.id || \"s\" + this.webix.uid();\n\t\tconst view : ISubView = config[name] = { id: target.id, url };\n\t\tif (view.url instanceof JetBase) {\n\t\t\tview.view = view.url;\n\t\t}\n\n\t\treturn target;\n\t}\n}\n","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class StoreRouter implements IJetRouter{\n\tprivate name:string;\n\tprivate cb: IJetRouterCallback;\n\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.name = (config.storeName || config.id+\":route\");\n\t\tthis.cb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\twebix.storage.session.put(this.name, path);\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget(){\n\t\treturn webix.storage.session.get(this.name);\n\t}\n}","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class UrlRouter implements IJetRouter{\n\tprivate cb: IJetRouterCallback;\n\tprivate prefix:string;\n\tconstructor(cb: IJetRouterCallback, config:any){\n\t\tthis.cb = cb;\n\n\t\twindow.onpopstate = () => this.cb(this.get());\n\t\tthis.prefix = config.routerPrefix || \"\";\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tif (this.get() !== path){\n\t\t\twindow.history.pushState(null, null, this.prefix + path);\n\t\t}\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget():string{\n\t\tconst path = window.location.pathname.replace(this.prefix, \"\");\n\t\treturn path !== \"/\" ? path : \"\";\n\t}\n}","import {IJetRouter, IJetRouterCallback, IJetRouterOptions} from \"../interfaces\";\n\nexport class EmptyRouter implements IJetRouter{\n\tprivate path: string;\n\tprivate cb: IJetRouterCallback;\n\n\tconstructor(cb: IJetRouterCallback, _$config:any){\n\t\tthis.path = \"\";\n\t\tthis.cb = cb;\n\t}\n\tset(path:string, config?:IJetRouterOptions){\n\t\tthis.path = path;\n\t\tif (!config || !config.silent){\n\t\t\tsetTimeout(() => this.cb(path), 1);\n\t\t}\n\t}\n\tget(){\n\t\treturn this.path;\n\t}\n}","import {IJetApp, IJetURL, IJetView} from \"../interfaces\";\n\nexport function UnloadGuard(app: IJetApp, view: IJetView, config: any){\n\tview.on(app, `app:guard`, function(_$url:IJetURL, point:IJetView, promise:any){\n\t\tif (point === view || point.contains(view)){\n\t\t\tconst res = config();\n\t\t\tif (res === false){\n\t\t\t\tpromise.confirm = Promise.reject(res);\n\t\t\t} else {\n\t\t\t\tpromise.confirm = promise.confirm.then(() => res);\n\t\t\t}\n\t\t}\n\t});\n}","//     (c) 2012-2018 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n'use strict';\n\n// var has = require('has');\nfunction has(store, key) {\n  return Object.prototype.hasOwnProperty.call(store, key);\n}\n// var forEach = require('for-each');\nfunction forEach(obj, handler, context) {\n  for (var key in obj) {\n    if (has(obj, key)) {\n      handler.call((context || obj), obj[key], key, obj);\n    }\n  }\n}\n// var trim = require('string.prototype.trim');\nfunction trim(str) {\n  return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n// var warning = require('warning');\nfunction warn(message) {\n  message = 'Warning: ' + message;\n  if (typeof console !== 'undefined') {\n    console.error(message);\n  }\n\n  try { throw new Error(message); } catch (x) {}\n}\n\nvar replace = String.prototype.replace;\nvar split = String.prototype.split;\n\n// #### Pluralization methods\n// The string that separates the different phrase possibilities.\nvar delimiter = '||||';\n\nvar russianPluralGroups = function (n) {\n  var end = n % 10;\n  if (n !== 11 && end === 1) {\n    return 0;\n  }\n  if (2 <= end && end <= 4 && !(n >= 12 && n <= 14)) {\n    return 1;\n  }\n  return 2;\n};\n\n// Mapping from pluralization group plural logic.\nvar pluralTypes = {\n  arabic: function (n) {\n    // http://www.arabeyes.org/Plural_Forms\n    if (n < 3) { return n; }\n    var lastTwo = n % 100;\n    if (lastTwo >= 3 && lastTwo <= 10) return 3;\n    return lastTwo >= 11 ? 4 : 5;\n  },\n  bosnian_serbian: russianPluralGroups,\n  chinese: function () { return 0; },\n  croatian: russianPluralGroups,\n  french: function (n) { return n > 1 ? 1 : 0; },\n  german: function (n) { return n !== 1 ? 1 : 0; },\n  russian: russianPluralGroups,\n  lithuanian: function (n) {\n    if (n % 10 === 1 && n % 100 !== 11) { return 0; }\n    return n % 10 >= 2 && n % 10 <= 9 && (n % 100 < 11 || n % 100 > 19) ? 1 : 2;\n  },\n  czech: function (n) {\n    if (n === 1) { return 0; }\n    return (n >= 2 && n <= 4) ? 1 : 2;\n  },\n  polish: function (n) {\n    if (n === 1) { return 0; }\n    var end = n % 10;\n    return 2 <= end && end <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n  },\n  icelandic: function (n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; },\n  slovenian: function (n) {\n    var lastTwo = n % 100;\n    if (lastTwo === 1) {\n      return 0;\n    }\n    if (lastTwo === 2) {\n      return 1;\n    }\n    if (lastTwo === 3 || lastTwo === 4) {\n      return 2;\n    }\n    return 3;\n  }\n};\n\n\n// Mapping from pluralization group to individual language codes/locales.\n// Will look up based on exact match, if not found and it's a locale will parse the locale\n// for language code, and if that does not exist will default to 'en'\nvar pluralTypeToLanguages = {\n  arabic: ['ar'],\n  bosnian_serbian: ['bs-Latn-BA', 'bs-Cyrl-BA', 'srl-RS', 'sr-RS'],\n  chinese: ['id', 'id-ID', 'ja', 'ko', 'ko-KR', 'lo', 'ms', 'th', 'th-TH', 'zh'],\n  croatian: ['hr', 'hr-HR'],\n  german: ['fa', 'da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hi-IN', 'hu', 'hu-HU', 'it', 'nl', 'no', 'pt', 'sv', 'tr'],\n  french: ['fr', 'tl', 'pt-br'],\n  russian: ['ru', 'ru-RU'],\n  lithuanian: ['lt'],\n  czech: ['cs', 'cs-CZ', 'sk'],\n  polish: ['pl'],\n  icelandic: ['is'],\n  slovenian: ['sl-SL']\n};\n\nfunction langToTypeMap(mapping) {\n  var ret = {};\n  forEach(mapping, function (langs, type) {\n    forEach(langs, function (lang) {\n      ret[lang] = type;\n    });\n  });\n  return ret;\n}\n\nfunction pluralTypeName(locale) {\n  var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n  return langToPluralType[locale]\n    || langToPluralType[split.call(locale, /-/, 1)[0]]\n    || langToPluralType.en;\n}\n\nfunction pluralTypeIndex(locale, count) {\n  return pluralTypes[pluralTypeName(locale)](count);\n}\n\nfunction escape(token) {\n  return token.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction constructTokenRegex(opts) {\n  var prefix = (opts && opts.prefix) || '%{';\n  var suffix = (opts && opts.suffix) || '}';\n\n  if (prefix === delimiter || suffix === delimiter) {\n    throw new RangeError('\"' + delimiter + '\" token is reserved for pluralization');\n  }\n\n  return new RegExp(escape(prefix) + '(.*?)' + escape(suffix), 'g');\n}\n\nvar dollarRegex = /\\$/g;\nvar dollarBillsYall = '$$';\nvar defaultTokenRegex = /%\\{(.*?)\\}/g;\n\n// ### transformPhrase(phrase, substitutions, locale)\n//\n// Takes a phrase string and transforms it by choosing the correct\n// plural form and interpolating it.\n//\n//     transformPhrase('Hello, %{name}!', {name: 'Spike'});\n//     // \"Hello, Spike!\"\n//\n// The correct plural form is selected if substitutions.smart_count\n// is set. You can pass in a number instead of an Object as `substitutions`\n// as a shortcut for `smart_count`.\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 1}, 'en');\n//     // \"1 new message\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 2}, 'en');\n//     // \"2 new messages\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', 5, 'en');\n//     // \"5 new messages\"\n//\n// You should pass in a third argument, the locale, to specify the correct plural type.\n// It defaults to `'en'` with 2 plural forms.\nfunction transformPhrase(phrase, substitutions, locale, tokenRegex) {\n  if (typeof phrase !== 'string') {\n    throw new TypeError('Polyglot.transformPhrase expects argument #1 to be string');\n  }\n\n  if (substitutions == null) {\n    return phrase;\n  }\n\n  var result = phrase;\n  var interpolationRegex = tokenRegex || defaultTokenRegex;\n\n  // allow number as a pluralization shortcut\n  var options = typeof substitutions === 'number' ? { smart_count: substitutions } : substitutions;\n\n  // Select plural form: based on a phrase text that contains `n`\n  // plural forms separated by `delimiter`, a `locale`, and a `substitutions.smart_count`,\n  // choose the correct plural form. This is only done if `count` is set.\n  if (options.smart_count != null && result) {\n    var texts = split.call(result, delimiter);\n    result = trim(texts[pluralTypeIndex(locale || 'en', options.smart_count)] || texts[0]);\n  }\n\n  // Interpolate: Creates a `RegExp` object for each interpolation placeholder.\n  result = replace.call(result, interpolationRegex, function (expression, argument) {\n    if (!has(options, argument) || options[argument] == null) { return expression; }\n    // Ensure replacement value is escaped to prevent special $-prefixed regex replace tokens.\n    return replace.call(options[argument], dollarRegex, dollarBillsYall);\n  });\n\n  return result;\n}\n\n// ### Polyglot class constructor\nfunction Polyglot(options) {\n  var opts = options || {};\n  this.phrases = {};\n  this.extend(opts.phrases || {});\n  this.currentLocale = opts.locale || 'en';\n  var allowMissing = opts.allowMissing ? transformPhrase : null;\n  this.onMissingKey = typeof opts.onMissingKey === 'function' ? opts.onMissingKey : allowMissing;\n  this.warn = opts.warn || warn;\n  this.tokenRegex = constructTokenRegex(opts.interpolation);\n}\n\n// ### polyglot.locale([locale])\n//\n// Get or set locale. Internally, Polyglot only uses locale for pluralization.\nPolyglot.prototype.locale = function (newLocale) {\n  if (newLocale) this.currentLocale = newLocale;\n  return this.currentLocale;\n};\n\n// ### polyglot.extend(phrases)\n//\n// Use `extend` to tell Polyglot how to translate a given key.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The key can be any string.  Feel free to call `extend` multiple times;\n// it will override any phrases with the same key, but leave existing phrases\n// untouched.\n//\n// It is also possible to pass nested phrase objects, which get flattened\n// into an object with the nested keys concatenated using dot notation.\n//\n//     polyglot.extend({\n//       \"nav\": {\n//         \"hello\": \"Hello\",\n//         \"hello_name\": \"Hello, %{name}\",\n//         \"sidebar\": {\n//           \"welcome\": \"Welcome\"\n//         }\n//       }\n//     });\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}',\n//     //   'nav.sidebar.welcome': 'Welcome'\n//     // }\n//\n// `extend` accepts an optional second argument, `prefix`, which can be used\n// to prefix every key in the phrases object with some string, using dot\n// notation.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     }, \"nav\");\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}'\n//     // }\n//\n// This feature is used internally to support nested phrase objects.\nPolyglot.prototype.extend = function (morePhrases, prefix) {\n  forEach(morePhrases, function (phrase, key) {\n    var prefixedKey = prefix ? prefix + '.' + key : key;\n    if (typeof phrase === 'object') {\n      this.extend(phrase, prefixedKey);\n    } else {\n      this.phrases[prefixedKey] = phrase;\n    }\n  }, this);\n};\n\n// ### polyglot.unset(phrases)\n// Use `unset` to selectively remove keys from a polyglot instance.\n//\n//     polyglot.unset(\"some_key\");\n//     polyglot.unset({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The unset method can take either a string (for the key), or an object hash with\n// the keys that you would like to unset.\nPolyglot.prototype.unset = function (morePhrases, prefix) {\n  if (typeof morePhrases === 'string') {\n    delete this.phrases[morePhrases];\n  } else {\n    forEach(morePhrases, function (phrase, key) {\n      var prefixedKey = prefix ? prefix + '.' + key : key;\n      if (typeof phrase === 'object') {\n        this.unset(phrase, prefixedKey);\n      } else {\n        delete this.phrases[prefixedKey];\n      }\n    }, this);\n  }\n};\n\n// ### polyglot.clear()\n//\n// Clears all phrases. Useful for special cases, such as freeing\n// up memory if you have lots of phrases but no longer need to\n// perform any translation. Also used internally by `replace`.\nPolyglot.prototype.clear = function () {\n  this.phrases = {};\n};\n\n// ### polyglot.replace(phrases)\n//\n// Completely replace the existing phrases with a new set of phrases.\n// Normally, just use `extend` to add more phrases, but under certain\n// circumstances, you may want to make sure no old phrases are lying around.\nPolyglot.prototype.replace = function (newPhrases) {\n  this.clear();\n  this.extend(newPhrases);\n};\n\n\n// ### polyglot.t(key, options)\n//\n// The most-used method. Provide a key, and `t` will return the\n// phrase.\n//\n//     polyglot.t(\"hello\");\n//     => \"Hello\"\n//\n// The phrase value is provided first by a call to `polyglot.extend()` or\n// `polyglot.replace()`.\n//\n// Pass in an object as the second argument to perform interpolation.\n//\n//     polyglot.t(\"hello_name\", {name: \"Spike\"});\n//     => \"Hello, Spike\"\n//\n// If you like, you can provide a default value in case the phrase is missing.\n// Use the special option key \"_\" to specify a default.\n//\n//     polyglot.t(\"i_like_to_write_in_language\", {\n//       _: \"I like to write in %{language}.\",\n//       language: \"JavaScript\"\n//     });\n//     => \"I like to write in JavaScript.\"\n//\nPolyglot.prototype.t = function (key, options) {\n  var phrase, result;\n  var opts = options == null ? {} : options;\n  if (typeof this.phrases[key] === 'string') {\n    phrase = this.phrases[key];\n  } else if (typeof opts._ === 'string') {\n    phrase = opts._;\n  } else if (this.onMissingKey) {\n    var onMissingKey = this.onMissingKey;\n    result = onMissingKey(key, opts, this.currentLocale, this.tokenRegex);\n  } else {\n    this.warn('Missing translation for key: \"' + key + '\"');\n    result = key;\n  }\n  if (typeof phrase === 'string') {\n    result = transformPhrase(phrase, opts, this.currentLocale, this.tokenRegex);\n  }\n  return result;\n};\n\n\n// ### polyglot.has(key)\n//\n// Check if polyglot has a translation for given key\nPolyglot.prototype.has = function (key) {\n  return has(this.phrases, key);\n};\n\n// export transformPhrase\nPolyglot.transformPhrase = function transform(phrase, substitutions, locale) {\n  return transformPhrase(phrase, substitutions, locale);\n};\n\nmodule.exports = Polyglot;\n","import Polyglot from \"webix-polyglot\";\nimport {IJetApp, IJetView} from \"../interfaces\";\n\ndeclare function require(name:string):any;\n\nexport function Locale(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\tconst storage = config.storage;\n\tlet lang = storage ? (storage.get(\"lang\") || \"en\") : (config.lang || \"en\");\n\n\n\tconst service = {\n\t\t_:null,\n\t\tpolyglot: null,\n\t\tgetLang(){ return lang; },\n\t\tsetLang(name:string, silent? : boolean){\n\t\t\tconst path = (config.path ? config.path + \"/\" : \"\") + name;\n\t\t\tlet data = require(\"jet-locales/\"+path);\n\t\t\tif (data.__esModule) {\n\t\t\t\tdata = data.default;\n\t\t\t}\n\n\t\t\tconst poly = service.polyglot = new Polyglot({ phrases:data });\n\t\t\tpoly.locale(name);\n\n\t\t\tservice._ = webix.bind(poly.t, poly);\n\t\t\tlang = name;\n\n\t\t\tif (storage){\n\t\t\t\tstorage.put(\"lang\", lang);\n\t\t\t}\n\t\t\tif (!silent){\n\t\t\t\tapp.refresh();\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setService(\"locale\", service);\n\tservice.setLang(lang, true);\n}","import {IJetApp, IJetURL, IJetView} from \"../interfaces\";\n\nfunction show(view, config, value){\n\tif (config.urls){\n\t\tvalue = config.urls[value] || value;\n\t}\n\tview.show(\"./\"+value);\n}\nexport function Menu(app: IJetApp, view: IJetView, config: any){\n\tconst ui = view.$$(config.id || config) as any;\n\tlet silent = false;\n\n\tui.attachEvent(\"onchange\", function(){\n\t\tif (!silent){\n\t\t\tshow(view, config, this.getValue());\n\t\t}\n\t});\n\tui.attachEvent(\"onafterselect\", function(){\n\t\tif (!silent){\n\t\t\tlet id = null;\n\t\t\tif (ui.setValue){\n\t\t\t\tid = this.getValue();\n\t\t\t} else if (ui.getSelectedId){\n\t\t\t\tid = ui.getSelectedId();\n\t\t\t}\n\t\t\tshow(view, config, id);\n\t\t}\n\t});\n\n\tview.on(app, `app:route`, function(url:IJetURL){\n\t\tconst segment = url[view.getIndex()];\n\t\tif (segment){\n\t\t\tsilent = true;\n\t\t\tconst page = segment.page;\n\t\t\tif (ui.setValue && ui.getValue() !== page){\n\t\t\t\tui.setValue(page);\n\t\t\t} else if (ui.select && ui.exists(page) && ui.getSelectedId() !== page){\n\t\t\t\tui.select(page);\n\t\t\t}\n\t\t\tsilent = false;\n\t\t}\n\t});\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nconst baseicons = {\n\tgood:\t\"check\",\n\terror: \"warning\",\n\tsaving: \"refresh fa-spin\"\n};\n\nconst basetext = {\n\tgood:\t\"Ok\",\n\terror: \"Error\",\n\tsaving: \"Connecting...\"\n};\n\nexport function Status(app: IJetApp, view: IJetView, config: any){\n\n\tlet status = \"good\";\n\tlet count = 0;\n\tlet iserror = false;\n\tlet expireDelay = config.expire;\n\tif (!expireDelay && expireDelay !== false){\n\t\texpireDelay = 2000;\n\t}\n\tconst texts = config.texts || basetext;\n\tconst icons = config.icons || baseicons;\n\n\tif (typeof config === \"string\"){\n\t\tconfig = { target:config };\n\t}\n\n\tfunction refresh(content? : string) {\n\t\tconst area = view.$$(config.target);\n\t\tif (area) {\n\t\t\tif (!content){\n\t\t\t\tcontent = \"<div class='status_\" +\n\t\t\t\t\tstatus +\n\t\t\t\t\t\"'><span class='webix_icon fa-\" +\n\t\t\t\t\ticons[status] + \"'></span> \" + texts[status] + \"</div>\";\n\t\t\t}\n\t\t\t(area as webix.ui.template).setHTML(content);\n\t\t}\n\t}\n\tfunction success(){\n\t\tcount--;\n\t\tsetStatus(\"good\");\n\t}\n\tfunction fail(err){\n\t\tcount--;\n\t\tsetStatus(\"error\", err);\n\t}\n\tfunction start(promise){\n\t\tcount++;\n\t\tsetStatus(\"saving\");\n\t\tif (promise && promise.then){\n\t\t\tpromise.then(success, fail);\n\t\t}\n\t}\n\tfunction getStatus(){\n\t\treturn status;\n\t}\n\tfunction hideStatus(){\n\t\tif (count === 0){\n\t\t\trefresh(\" \");\n\t\t}\n\t}\n\tfunction setStatus(mode, err?){\n\t\tif (count < 0){\n\t\t\tcount = 0;\n\t\t}\n\n\t\tif (mode === \"saving\"){\n\t\t\tstatus = \"saving\";\n\t\t\trefresh();\n\t\t} else {\n\t\t\tiserror = (mode === \"error\");\n\t\t\tif (count === 0){\n\t\t\t\tstatus = iserror ? \"error\" : \"good\";\n\t\t\t\tif (iserror){\n\t\t\t\t\tapp.error(\"app:error:server\", [err.responseText || err]);\n\t\t\t\t} else {\n\t\t\t\t\tif (expireDelay){\n\t\t\t\t\t\tsetTimeout(hideStatus, expireDelay);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trefresh();\n\t\t\t}\n\t\t}\n\t}\n\tfunction track(data){\n\t\tconst dp = webix.dp(data);\n\t\tif (dp){\n\t\t\tview.on(dp, \"onAfterDataSend\", start);\n\t\t\tview.on(dp, \"onAfterSaveError\", (_id, _obj, response) => fail(response));\n\t\t\tview.on(dp, \"onAfterSave\", success);\n\t\t}\n\t}\n\n\tapp.setService(\"status\", {\n\t\tgetStatus,\n\t\tsetStatus,\n\t\ttrack\n\t});\n\n\tif (config.remote){\n\t\tview.on(webix, \"onRemoteCall\", start);\n\t}\n\n\tif (config.ajax){\n\t\tview.on(webix, \"onBeforeAjax\",\n\t\t\t(_mode, _url, _data, _request, _headers, _files, promise) => {\n\t\t\t\tstart(promise);\n\t\t});\n\t}\n\n\tif (config.data){\n\t\ttrack(config.data);\n\t}\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nexport function Theme(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\tconst storage = config.storage;\n\tlet theme = storage ?\n\t\t(storage.get(\"theme\")||\"flat-default\")\n\t\t:\n\t\t(config.theme || \"flat-default\");\n\n\tconst service = {\n\t\tgetTheme(){ return theme; },\n\t\tsetTheme(name:string, silent?:boolean){\n\t\t\tconst parts = name.split(\"-\");\n\t\t\tconst links = document.getElementsByTagName(\"link\");\n\n\t\t\tfor (let i=0; i<links.length; i++){\n\t\t\t\tconst lname = links[i].getAttribute(\"title\");\n\t\t\t\tif (lname){\n\t\t\t\t\tif (lname === name || lname === parts[0]){\n\t\t\t\t\t\tlinks[i].disabled = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlinks[i].disabled = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t(webix as any).skin.set(parts[0]);\n\t\t\t// remove old css\n\t\t\twebix.html.removeCss(document.body, \"theme-\"+theme);\n\t\t\t// add new css\n\t\t\twebix.html.addCss(document.body, \"theme-\"+name);\n\n\t\t\ttheme = name;\n\t\t\tif (storage){\n\t\t\t\tstorage.put(\"theme\", name);\n\t\t\t}\n\t\t\tif (!silent){\n\t\t\t\tapp.refresh();\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setService(\"theme\", service);\n\tservice.setTheme(theme, true);\n}","import {IJetApp, IJetView} from \"../interfaces\";\n\nfunction copyParams(view: IJetView, url, route){\n\tfor (let i = 0; i < route.length; i++){\n\t\tview.setParam(route[i], url[i+1] ? url[i+1].page : \"\");\n\t}\n\n}\nexport function UrlParam(app: IJetApp, view: IJetView, config: any){\n\tconst route = config.route || config;\n\tview.on(app, \"app:urlchange\", function(subview, url){\n\t\tif (view === subview){\n\t\t\tcopyParams(view, url, route);\n\t\t\turl.splice(1, route.length);\n\t\t}\n\t});\n\tview.on(app, \"app:paramchange\", function(subview, name, value, url){\n\t\tif (view === subview && url){\n\t\t\tfor (let i=0; i<route.length; i++){\n\t\t\t\tif (route[i] === name){\n\t\t\t\t\t// changing in the url\n\t\t\t\t\tview.show([i, value]);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tcopyParams(view, view.getUrl(), route);\n}\n","import {IJetApp, IJetView} from \"../interfaces\";\n\nexport function User(app: IJetApp, _view: IJetView, config: any){\n\tconfig = config || {};\n\n\tconst login = config.login || \"/login\";\n\tconst logout = config.logout || \"/logout\";\n\tconst afterLogin = config.afterLogin || app.config.start;\n\tconst afterLogout = config.afterLogout || \"/login\";\n\tconst ping = config.ping || 5*60*1000;\n\tconst model = config.model;\n\tlet user = config.user;\n\n\tconst service = {\n\t\tgetUser(){\n\t\t\treturn user;\n\t\t},\n\t\tgetStatus(server? : boolean){\n\t\t\tif (!server){\n\t\t\t\treturn user !== null;\n\t\t\t}\n\n\t\t\treturn model.status().catch(() => null).then(data => {\n\t\t\t\tuser = data;\n\t\t\t});\n\t\t},\n\t\tlogin(name:string, pass:string){\n\t\t\treturn model.login(name, pass).then(data => {\n\t\t\t\tuser = data;\n\t\t\t\tif (!data){\n\t\t\t\t\tthrow new Error(\"Access denied\");\n\t\t\t\t}\n\n\t\t\t\tapp.callEvent(\"app:user:login\", [ user ]);\n\t\t\t\tapp.show(afterLogin);\n\t\t\t});\n\t\t},\n\t\tlogout(){\n\t\t\tuser = null;\n\t\t\treturn model.logout().then(res => {\n\t\t\t\tapp.callEvent(\"app:user:logout\",[]);\n\t\t\t\treturn res;\n\t\t\t});\n\t\t}\n\t};\n\n\tfunction canNavigate(url, obj){\n\t\tif (url === logout){\n\t\t\tservice.logout();\n\t\t\tobj.redirect = afterLogout;\n\t\t} else if (url !== login && !service.getStatus()){\n\t\t\tobj.redirect = login;\n\t\t}\n\t}\n\n\tapp.setService(\"user\", service);\n\n\tapp.attachEvent(`app:guard`, function(url: string, _$root: any, obj:any){\n\t\tif (typeof user === \"undefined\"){\n\t\t\tobj.confirm = service.getStatus(true).then(() => canNavigate(url, obj));\n\t\t}\n\n\t\treturn canNavigate(url, obj);\n\t});\n\n\tif (ping){\n\t\tsetInterval(() => service.getStatus(true), ping);\n\t}\n}","/*\nMIT License\nCopyright (c) 2018 XB Software\n*/\n\nimport { IJetApp, IJetView } from \"./interfaces\";\nexport { IJetApp, IJetView };\n\nexport { JetApp } \t\tfrom \"./JetApp\";\nexport { JetView } \t\tfrom \"./JetView\";\n\nexport { HashRouter } \tfrom \"./routers/HashRouter\";\nexport { StoreRouter }\tfrom \"./routers/StoreRouter\";\nexport { UrlRouter } \tfrom \"./routers/UrlRouter\";\nexport { EmptyRouter } \tfrom \"./routers/EmptyRouter\";\n\nimport {UnloadGuard} \tfrom \"./plugins/Guard\";\nimport {Locale} \t\tfrom \"./plugins/Locale\";\nimport {Menu} \t\t\tfrom \"./plugins/Menu\";\nimport {Status} \t\tfrom \"./plugins/Status\";\nimport {Theme} \t\t\tfrom \"./plugins/Theme\";\nimport {UrlParam}\t\tfrom \"./plugins/UrlParam\";\nimport {User} \t\t\tfrom \"./plugins/User\";\n\nexport const plugins = {\n\tUnloadGuard, Locale, Menu, Theme, User, Status, UrlParam\n};\n\nif (!(window as any).Promise){\n\t(window as any).Promise = webix.promise;\n}"],"names":["tslib_1.__extends","Polyglot"],"mappings":"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"}